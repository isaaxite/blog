{"version":3,"file":"moize.js","sources":["../src/constants.ts","../src/utils.ts","../src/maxAge.ts","../src/stats.ts","../src/instance.ts","../src/component.ts","../src/maxArgs.ts","../src/serialize.ts","../src/options.ts","../src/updateCacheForKey.ts","../src/index.ts"],"sourcesContent":["import type { AnyFn, Options } from '../index.d';\n\n/**\n * @private\n *\n * @constant DEFAULT_OPTIONS\n */\nexport const DEFAULT_OPTIONS: Options<AnyFn> = {\n    isDeepEqual: false,\n    isPromise: false,\n    isReact: false,\n    isSerialized: false,\n    isShallowEqual: false,\n    matchesArg: undefined,\n    matchesKey: undefined,\n    maxAge: undefined,\n    maxArgs: undefined,\n    maxSize: 1,\n    onExpire: undefined,\n    profileName: undefined,\n    serializer: undefined,\n    updateCacheForKey: undefined,\n    transformArgs: undefined,\n    updateExpire: false,\n};\n","import { DEFAULT_OPTIONS } from './constants';\n\nimport type {\n    AnyFn,\n    Expiration,\n    IsEqual,\n    IsMatchingKey,\n    Key,\n    Moizeable,\n    Moized,\n    Options,\n} from '../index.d';\n\n/**\n * @private\n *\n * @description\n * method to combine functions and return a single function that fires them all\n *\n * @param functions the functions to compose\n * @returns the composed function\n */\nexport function combine<Args extends any[], Result>(\n    ...functions: Array<(...args: Args) => any>\n): ((...args: Args) => Result) | undefined {\n    return functions.reduce(function (f: any, g: any) {\n        if (typeof f === 'function') {\n            return typeof g === 'function'\n                ? function (this: any) {\n                      f.apply(this, arguments);\n                      g.apply(this, arguments);\n                  }\n                : f;\n        }\n\n        if (typeof g === 'function') {\n            return g;\n        }\n    });\n}\n\n/**\n * @private\n *\n * @description\n * method to compose functions and return a single function\n *\n * @param functions the functions to compose\n * @returns the composed function\n */\nexport function compose<Method>(...functions: Method[]): Method {\n    return functions.reduce(function (f: any, g: any) {\n        if (typeof f === 'function') {\n            return typeof g === 'function'\n                ? function (this: any) {\n                      return f(g.apply(this, arguments));\n                  }\n                : f;\n        }\n\n        if (typeof g === 'function') {\n            return g;\n        }\n    });\n}\n\n/**\n * @private\n *\n * @description\n * find the index of the expiration based on the key\n *\n * @param expirations the list of expirations\n * @param key the key to match\n * @returns the index of the expiration\n */\nexport function findExpirationIndex(expirations: Expiration[], key: Key) {\n    for (let index = 0; index < expirations.length; index++) {\n        if (expirations[index].key === key) {\n            return index;\n        }\n    }\n\n    return -1;\n}\n\n/**\n * @private\n *\n * @description\n * create function that finds the index of the key in the list of cache keys\n *\n * @param isEqual the function to test individual argument equality\n * @param isMatchingKey the function to test full key equality\n * @returns the function that finds the index of the key\n */\nexport function createFindKeyIndex(\n    isEqual: IsEqual,\n    isMatchingKey: IsMatchingKey | undefined\n) {\n    const areKeysEqual: IsMatchingKey =\n        typeof isMatchingKey === 'function'\n            ? isMatchingKey\n            : function (cacheKey: Key, key: Key) {\n                  for (let index = 0; index < key.length; index++) {\n                      if (!isEqual(cacheKey[index], key[index])) {\n                          return false;\n                      }\n                  }\n\n                  return true;\n              };\n\n    return function (keys: Key[], key: Key) {\n        for (let keysIndex = 0; keysIndex < keys.length; keysIndex++) {\n            if (\n                keys[keysIndex].length === key.length &&\n                areKeysEqual(keys[keysIndex], key)\n            ) {\n                return keysIndex;\n            }\n        }\n\n        return -1;\n    };\n}\n\ntype MergedOptions<\n    OriginalOptions extends Options<Moizeable>,\n    NewOptions extends Options<Moizeable>\n> = Omit<OriginalOptions, keyof NewOptions> & NewOptions;\n\n/**\n * @private\n *\n * @description\n * merge two options objects, combining or composing functions as necessary\n *\n * @param originalOptions the options that already exist on the method\n * @param newOptions the new options to merge\n * @returns the merged options\n */\nexport function mergeOptions<\n    OriginalOptions extends Options<Moizeable>,\n    NewOptions extends Options<Moizeable>\n>(\n    originalOptions: OriginalOptions,\n    newOptions: NewOptions | undefined\n): MergedOptions<OriginalOptions, NewOptions> {\n    if (!newOptions || newOptions === DEFAULT_OPTIONS) {\n        return originalOptions as unknown as MergedOptions<\n            OriginalOptions,\n            NewOptions\n        >;\n    }\n\n    return {\n        ...originalOptions,\n        ...newOptions,\n        onCacheAdd: combine(originalOptions.onCacheAdd, newOptions.onCacheAdd),\n        onCacheChange: combine(\n            originalOptions.onCacheChange,\n            newOptions.onCacheChange\n        ),\n        onCacheHit: combine(originalOptions.onCacheHit, newOptions.onCacheHit),\n        transformArgs: compose(\n            originalOptions.transformArgs,\n            newOptions.transformArgs\n        ),\n    };\n}\n\nexport function isMoized(\n    fn: Moizeable | Moized | Options<AnyFn>\n): fn is Moized {\n    return typeof fn === 'function' && (fn as Moizeable).isMoized;\n}\n\nexport function setName(\n    fn: Moized,\n    originalFunctionName: string,\n    profileName: string\n) {\n    try {\n        const name = profileName || originalFunctionName || 'anonymous';\n\n        Object.defineProperty(fn, 'name', {\n            configurable: true,\n            enumerable: false,\n            value: `moized(${name})`,\n            writable: true,\n        });\n    } catch {\n        // For engines where `function.name` is not configurable, do nothing.\n    }\n}\n","import { createFindKeyIndex, findExpirationIndex } from './utils';\n\nimport type {\n    AnyFn,\n    Cache,\n    Expiration,\n    IsEqual,\n    IsMatchingKey,\n    Key,\n    OnCacheOperation,\n    Options,\n} from '../index.d';\n\n/**\n * @private\n *\n * @description\n * clear an active expiration and remove it from the list if applicable\n *\n * @param expirations the list of expirations\n * @param key the key to clear\n * @param shouldRemove should the expiration be removed from the list\n */\nexport function clearExpiration(\n    expirations: Expiration[],\n    key: Key,\n    shouldRemove?: boolean\n) {\n    const expirationIndex = findExpirationIndex(expirations, key);\n\n    if (expirationIndex !== -1) {\n        clearTimeout(expirations[expirationIndex].timeoutId);\n\n        if (shouldRemove) {\n            expirations.splice(expirationIndex, 1);\n        }\n    }\n}\n\n/**\n * @private\n *\n * @description\n * Create the timeout for the given expiration method. If the ability to `unref`\n * exists, then apply it to avoid process locks in NodeJS.\n *\n * @param expirationMethod the method to fire upon expiration\n * @param maxAge the time to expire after\n * @returns the timeout ID\n */\nexport function createTimeout(expirationMethod: () => void, maxAge: number) {\n    const timeoutId = setTimeout(expirationMethod, maxAge);\n\n    if (typeof timeoutId.unref === 'function') {\n        timeoutId.unref();\n    }\n\n    return timeoutId;\n}\n\n/**\n * @private\n *\n * @description\n * create a function that, when an item is added to the cache, adds an expiration for it\n *\n * @param expirations the mutable expirations array\n * @param options the options passed on initialization\n * @param isEqual the function to check argument equality\n * @param isMatchingKey the function to check complete key equality\n * @returns the onCacheAdd function to handle expirations\n */\nexport function createOnCacheAddSetExpiration<MoizeableFn extends AnyFn>(\n    expirations: Expiration[],\n    options: Options<MoizeableFn>,\n    isEqual: IsEqual,\n    isMatchingKey: IsMatchingKey\n): OnCacheOperation<MoizeableFn> {\n    const { maxAge } = options;\n\n    return function onCacheAdd(\n        cache: Cache<MoizeableFn>,\n        moizedOptions: Options<MoizeableFn>,\n        moized: MoizeableFn\n    ) {\n        const key: any = cache.keys[0];\n\n        if (findExpirationIndex(expirations, key) === -1) {\n            const expirationMethod = function () {\n                const findKeyIndex = createFindKeyIndex(isEqual, isMatchingKey);\n\n                const keyIndex: number = findKeyIndex(cache.keys, key);\n                const value: any = cache.values[keyIndex];\n\n                if (~keyIndex) {\n                    cache.keys.splice(keyIndex, 1);\n                    cache.values.splice(keyIndex, 1);\n\n                    if (typeof options.onCacheChange === 'function') {\n                        options.onCacheChange(cache, moizedOptions, moized);\n                    }\n                }\n\n                clearExpiration(expirations, key, true);\n\n                if (\n                    typeof options.onExpire === 'function' &&\n                    options.onExpire(key) === false\n                ) {\n                    cache.keys.unshift(key);\n                    cache.values.unshift(value);\n\n                    onCacheAdd(cache, moizedOptions, moized);\n\n                    if (typeof options.onCacheChange === 'function') {\n                        options.onCacheChange(cache, moizedOptions, moized);\n                    }\n                }\n            };\n\n            expirations.push({\n                expirationMethod,\n                key,\n                timeoutId: createTimeout(expirationMethod, maxAge),\n            });\n        }\n    };\n}\n\n/**\n * @private\n *\n * @description\n * creates a function that, when a cache item is hit, reset the expiration\n *\n * @param expirations the mutable expirations array\n * @param options the options passed on initialization\n * @returns the onCacheAdd function to handle expirations\n */\nexport function createOnCacheHitResetExpiration<MoizeableFn extends AnyFn>(\n    expirations: Expiration[],\n    options: Options<MoizeableFn>\n): OnCacheOperation<MoizeableFn> {\n    return function onCacheHit(cache: Cache<MoizeableFn>) {\n        const key = cache.keys[0];\n        const expirationIndex = findExpirationIndex(expirations, key);\n\n        if (~expirationIndex) {\n            clearExpiration(expirations, key, false);\n\n            expirations[expirationIndex].timeoutId = createTimeout(\n                expirations[expirationIndex].expirationMethod,\n                options.maxAge\n            );\n        }\n    };\n}\n\n/**\n * @private\n *\n * @description\n * get the micro-memoize options specific to the maxAge option\n *\n * @param expirations the expirations for the memoized function\n * @param options the options passed to the moizer\n * @param isEqual the function to test equality of the key on a per-argument basis\n * @param isMatchingKey the function to test equality of the whole key\n * @returns the object of options based on the entries passed\n */\nexport function getMaxAgeOptions<MoizeableFn extends AnyFn>(\n    expirations: Expiration[],\n    options: Options<MoizeableFn>,\n    isEqual: IsEqual,\n    isMatchingKey: IsMatchingKey\n): {\n    onCacheAdd: OnCacheOperation<MoizeableFn> | undefined;\n    onCacheHit: OnCacheOperation<MoizeableFn> | undefined;\n} {\n    const onCacheAdd =\n        typeof options.maxAge === 'number' && isFinite(options.maxAge)\n            ? createOnCacheAddSetExpiration(\n                  expirations,\n                  options,\n                  isEqual,\n                  isMatchingKey\n              )\n            : undefined;\n\n    return {\n        onCacheAdd,\n        onCacheHit:\n            onCacheAdd && options.updateExpire\n                ? createOnCacheHitResetExpiration(expirations, options)\n                : undefined,\n    };\n}\n","import type {\n    GlobalStatsObject,\n    Moizeable,\n    OnCacheOperation,\n    Options,\n    StatsCache,\n    StatsProfile,\n} from '../index.d';\n\nexport const statsCache: StatsCache = {\n    anonymousProfileNameCounter: 1,\n    isCollectingStats: false,\n    profiles: {},\n};\n\nlet hasWarningDisplayed = false;\n\nexport function clearStats(profileName?: string) {\n    if (profileName) {\n        delete statsCache.profiles[profileName];\n    } else {\n        statsCache.profiles = {};\n    }\n}\n\n/**\n * @private\n *\n * @description\n * activate stats collection\n *\n * @param isCollectingStats should stats be collected\n */\nexport function collectStats(isCollectingStats = true) {\n    statsCache.isCollectingStats = isCollectingStats;\n}\n\n/**\n * @private\n *\n * @description\n * create a function that increments the number of calls for the specific profile\n */\nexport function createOnCacheAddIncrementCalls<MoizeableFn extends Moizeable>(\n    options: Options<MoizeableFn>\n) {\n    const { profileName } = options;\n\n    return function () {\n        if (profileName && !statsCache.profiles[profileName]) {\n            statsCache.profiles[profileName] = {\n                calls: 0,\n                hits: 0,\n            };\n        }\n\n        statsCache.profiles[profileName].calls++;\n    };\n}\n\n/**\n * @private\n *\n * @description\n * create a function that increments the number of calls and cache hits for the specific profile\n */\nexport function createOnCacheHitIncrementCallsAndHits<\n    MoizeableFn extends Moizeable\n>(options: Options<MoizeableFn>) {\n    return function () {\n        const { profiles } = statsCache;\n        const { profileName } = options;\n\n        if (!profiles[profileName]) {\n            profiles[profileName] = {\n                calls: 0,\n                hits: 0,\n            };\n        }\n\n        profiles[profileName].calls++;\n        profiles[profileName].hits++;\n    };\n}\n\n/**\n * @private\n *\n * @description\n * get the profileName for the function when one is not provided\n *\n * @param fn the function to be memoized\n * @returns the derived profileName for the function\n */\nexport function getDefaultProfileName<MoizeableFn extends Moizeable>(\n    fn: MoizeableFn\n) {\n    return (\n        fn.displayName ||\n        fn.name ||\n        `Anonymous ${statsCache.anonymousProfileNameCounter++}`\n    );\n}\n\n/**\n * @private\n *\n * @description\n * get the usage percentage based on the number of hits and total calls\n *\n * @param calls the number of calls made\n * @param hits the number of cache hits when called\n * @returns the usage as a percentage string\n */\nexport function getUsagePercentage(calls: number, hits: number) {\n    return calls ? `${((hits / calls) * 100).toFixed(4)}%` : '0.0000%';\n}\n\n/**\n * @private\n *\n * @description\n * get the statistics for a given method or all methods\n *\n * @param [profileName] the profileName to get the statistics for (get all when not provided)\n * @returns the object with stats information\n */\nexport function getStats(profileName?: string): GlobalStatsObject {\n    if (!statsCache.isCollectingStats && !hasWarningDisplayed) {\n        console.warn(\n            'Stats are not currently being collected, please run \"collectStats\" to enable them.'\n        ); // eslint-disable-line no-console\n\n        hasWarningDisplayed = true;\n    }\n\n    const { profiles } = statsCache;\n\n    if (profileName) {\n        if (!profiles[profileName]) {\n            return {\n                calls: 0,\n                hits: 0,\n                usage: '0.0000%',\n            };\n        }\n\n        const { [profileName]: profile } = profiles;\n\n        return {\n            ...profile,\n            usage: getUsagePercentage(profile.calls, profile.hits),\n        };\n    }\n\n    const completeStats: StatsProfile = Object.keys(statsCache.profiles).reduce(\n        (completeProfiles, profileName) => {\n            completeProfiles.calls += profiles[profileName].calls;\n            completeProfiles.hits += profiles[profileName].hits;\n\n            return completeProfiles;\n        },\n        {\n            calls: 0,\n            hits: 0,\n        }\n    );\n\n    return {\n        ...completeStats,\n        profiles: Object.keys(profiles).reduce(\n            (computedProfiles, profileName) => {\n                computedProfiles[profileName] = getStats(profileName);\n\n                return computedProfiles;\n            },\n            {} as Record<string, StatsProfile>\n        ),\n        usage: getUsagePercentage(completeStats.calls, completeStats.hits),\n    };\n}\n\n/**\n * @private\n *\n * @function getStatsOptions\n *\n * @description\n * get the options specific to storing statistics\n *\n * @param {Options} options the options passed to the moizer\n * @returns {Object} the options specific to keeping stats\n */\nexport function getStatsOptions<MoizeableFn extends Moizeable>(\n    options: Options<MoizeableFn>\n): {\n    onCacheAdd?: OnCacheOperation<MoizeableFn>;\n    onCacheHit?: OnCacheOperation<MoizeableFn>;\n} {\n    return statsCache.isCollectingStats\n        ? {\n              onCacheAdd: createOnCacheAddIncrementCalls(options),\n              onCacheHit: createOnCacheHitIncrementCallsAndHits(options),\n          }\n        : {};\n}\n","import { clearExpiration } from './maxAge';\nimport { clearStats, getStats } from './stats';\nimport { createFindKeyIndex } from './utils';\n\nimport type {\n    Key,\n    Memoized,\n    Moizeable,\n    MoizeConfiguration,\n    Moized,\n    Options,\n    StatsProfile,\n} from '../index.d';\n\nconst ALWAYS_SKIPPED_PROPERTIES: Record<string, boolean> = {\n    arguments: true,\n    callee: true,\n    caller: true,\n    constructor: true,\n    length: true,\n    name: true,\n    prototype: true,\n};\n\n/**\n * @private\n *\n * @description\n * copy the static properties from the original function to the moized\n * function\n *\n * @param originalFn the function copying from\n * @param newFn the function copying to\n * @param skippedProperties the list of skipped properties, if any\n */\nexport function copyStaticProperties<\n    OriginalMoizeableFn extends Moizeable,\n    NewMoizeableFn extends Moizeable\n>(\n    originalFn: OriginalMoizeableFn,\n    newFn: NewMoizeableFn,\n    skippedProperties: string[] = []\n) {\n    Object.getOwnPropertyNames(originalFn).forEach((property) => {\n        if (\n            !ALWAYS_SKIPPED_PROPERTIES[property] &&\n            skippedProperties.indexOf(property) === -1\n        ) {\n            const descriptor = Object.getOwnPropertyDescriptor(\n                originalFn,\n                property\n            );\n\n            if (descriptor.get || descriptor.set) {\n                Object.defineProperty(newFn, property, descriptor);\n            } else {\n                // @ts-expect-error - properites may not align\n                newFn[property] = originalFn[property];\n            }\n        }\n    });\n}\n\n/**\n * @private\n *\n * @description\n * add methods to the moized fuction object that allow extra features\n *\n * @param memoized the memoized function from micro-memoize\n */\nexport function addInstanceMethods<MoizeableFn extends Moizeable>(\n    memoized: Moizeable,\n    { expirations }: MoizeConfiguration<MoizeableFn>\n) {\n    const { options } = memoized;\n\n    const findKeyIndex = createFindKeyIndex(\n        options.isEqual,\n        options.isMatchingKey\n    );\n\n    const moized = memoized as unknown as Moized<\n        MoizeableFn,\n        Options<MoizeableFn>\n    >;\n\n    moized.clear = function () {\n        const {\n            _microMemoizeOptions: { onCacheChange },\n            cache,\n        } = moized;\n\n        cache.keys.length = 0;\n        cache.values.length = 0;\n\n        if (onCacheChange) {\n            onCacheChange(cache, moized.options, moized);\n        }\n\n        return true;\n    };\n\n    moized.clearStats = function () {\n        clearStats(moized.options.profileName);\n    };\n\n    moized.get = function (key: Key) {\n        const {\n            _microMemoizeOptions: { transformKey },\n            cache,\n        } = moized;\n\n        const cacheKey = transformKey ? transformKey(key) : key;\n        const keyIndex = findKeyIndex(cache.keys, cacheKey);\n\n        return keyIndex !== -1 ? moized.apply(this, key) : undefined;\n    };\n\n    moized.getStats = function (): StatsProfile {\n        return getStats(moized.options.profileName);\n    };\n\n    moized.has = function (key: Key) {\n        const { transformKey } = moized._microMemoizeOptions;\n\n        const cacheKey = transformKey ? transformKey(key) : key;\n\n        return findKeyIndex(moized.cache.keys, cacheKey) !== -1;\n    };\n\n    moized.keys = function () {\n        return moized.cacheSnapshot.keys;\n    };\n\n    moized.remove = function (key: Key) {\n        const {\n            _microMemoizeOptions: { onCacheChange, transformKey },\n            cache,\n        } = moized;\n\n        const keyIndex = findKeyIndex(\n            cache.keys,\n            transformKey ? transformKey(key) : key\n        );\n\n        if (keyIndex === -1) {\n            return false;\n        }\n\n        const existingKey = cache.keys[keyIndex];\n\n        cache.keys.splice(keyIndex, 1);\n        cache.values.splice(keyIndex, 1);\n\n        if (onCacheChange) {\n            onCacheChange(cache, moized.options, moized);\n        }\n\n        clearExpiration(expirations, existingKey, true);\n\n        return true;\n    };\n\n    moized.set = function (key: Key, value: any) {\n        const { _microMemoizeOptions, cache, options } = moized;\n        const { onCacheAdd, onCacheChange, transformKey } =\n            _microMemoizeOptions;\n\n        const cacheKey = transformKey ? transformKey(key) : key;\n        const keyIndex = findKeyIndex(cache.keys, cacheKey);\n\n        if (keyIndex === -1) {\n            const cutoff = options.maxSize - 1;\n\n            if (cache.size > cutoff) {\n                cache.keys.length = cutoff;\n                cache.values.length = cutoff;\n            }\n\n            cache.keys.unshift(cacheKey);\n            cache.values.unshift(value);\n\n            if (options.isPromise) {\n                cache.updateAsyncCache(moized);\n            }\n\n            if (onCacheAdd) {\n                onCacheAdd(cache, options, moized);\n            }\n\n            if (onCacheChange) {\n                onCacheChange(cache, options, moized);\n            }\n        } else {\n            const existingKey = cache.keys[keyIndex];\n\n            cache.values[keyIndex] = value;\n\n            if (keyIndex > 0) {\n                cache.orderByLru(existingKey, value, keyIndex);\n            }\n\n            if (options.isPromise) {\n                cache.updateAsyncCache(moized);\n            }\n\n            if (typeof onCacheChange === 'function') {\n                onCacheChange(cache, options, moized);\n            }\n        }\n    };\n\n    moized.values = function () {\n        return moized.cacheSnapshot.values;\n    };\n}\n\n/**\n * @private\n *\n * @description\n * add propeties to the moized fuction object that surfaces extra information\n *\n * @param memoized the memoized function\n * @param expirations the list of expirations for cache items\n * @param options the options passed to the moizer\n * @param originalFunction the function that is being memoized\n */\nexport function addInstanceProperties<MoizeableFn extends Moizeable>(\n    memoized: Memoized<MoizeableFn>,\n    {\n        expirations,\n        options: moizeOptions,\n        originalFunction,\n    }: MoizeConfiguration<MoizeableFn>\n) {\n    const { options: microMemoizeOptions } = memoized;\n\n    Object.defineProperties(memoized, {\n        _microMemoizeOptions: {\n            configurable: true,\n            get() {\n                return microMemoizeOptions;\n            },\n        },\n\n        cacheSnapshot: {\n            configurable: true,\n            get() {\n                const { cache: currentCache } = memoized;\n\n                return {\n                    keys: currentCache.keys.slice(0),\n                    size: currentCache.size,\n                    values: currentCache.values.slice(0),\n                };\n            },\n        },\n\n        expirations: {\n            configurable: true,\n            get() {\n                return expirations;\n            },\n        },\n\n        expirationsSnapshot: {\n            configurable: true,\n            get() {\n                return expirations.slice(0);\n            },\n        },\n\n        isMoized: {\n            configurable: true,\n            get() {\n                return true;\n            },\n        },\n\n        options: {\n            configurable: true,\n            get() {\n                return moizeOptions;\n            },\n        },\n\n        originalFunction: {\n            configurable: true,\n            get() {\n                return originalFunction;\n            },\n        },\n    });\n\n    const moized = memoized as unknown as Moized<\n        MoizeableFn,\n        Options<MoizeableFn>\n    >;\n\n    copyStaticProperties(originalFunction, moized);\n}\n\n/**\n * @private\n *\n * @description\n * add methods and properties to the memoized function for more features\n *\n * @param memoized the memoized function\n * @param configuration the configuration object for the instance\n * @returns the memoized function passed\n */\nexport function createMoizeInstance<\n    MoizeableFn extends Moizeable,\n    CombinedOptions extends Options<MoizeableFn>\n>(\n    memoized: Memoized<MoizeableFn>,\n    configuration: MoizeConfiguration<MoizeableFn>\n) {\n    addInstanceMethods<MoizeableFn>(memoized, configuration);\n    addInstanceProperties<MoizeableFn>(memoized, configuration);\n\n    return memoized as Moized<MoizeableFn, CombinedOptions>;\n}\n","import { copyStaticProperties } from './instance';\nimport { setName } from './utils';\n\nimport type {\n    Moize,\n    Moized as MoizedFunction,\n    Moizeable,\n    Options,\n} from '../index.d';\n\n// This was stolen from React internals, which allows us to create React elements without needing\n// a dependency on the React library itself.\nconst REACT_ELEMENT_TYPE =\n    typeof Symbol === 'function' && Symbol.for\n        ? Symbol.for('react.element')\n        : 0xeac7;\n\n/**\n * @private\n *\n * @description\n * Create a component that memoizes based on `props` and legacy `context`\n * on a per-instance basis. This requires creating a component class to\n * store the memoized function. The cost is quite low, and avoids the\n * need to have access to the React dependency by basically re-creating\n * the basic essentials for a component class and the results of the\n * `createElement` function.\n *\n * @param moizer the top-level moize method\n * @param fn the component to memoize\n * @param options the memoization options\n * @returns the memoized component\n */\nexport function createMoizedComponent<MoizeableFn extends Moizeable>(\n    moizer: Moize,\n    fn: MoizeableFn,\n    options: Options<MoizeableFn>\n) {\n    /**\n     * This is a hack override setting the necessary options\n     * for a React component to be memoized. In the main `moize`\n     * method, if the `isReact` option is set it is short-circuited\n     * to call this function, and these overrides allow the\n     * necessary transformKey method to be derived.\n     *\n     * The order is based on:\n     * 1) Set the necessary aspects of transformKey for React components.\n     * 2) Allow setting of other options and overrides of those aspects\n     *    if desired (for example, `isDeepEqual` will use deep equality).\n     * 3) Always set `isReact` to false to prevent infinite loop.\n     */\n    const reactMoizer = moizer({\n        maxArgs: 2,\n        isShallowEqual: true,\n        ...options,\n        isReact: false,\n    });\n\n    if (!fn.displayName) {\n        // @ts-ignore - allow setting of displayName\n        fn.displayName = fn.name || 'Component';\n    }\n\n    function Moized<Props extends Record<string, unknown>, Context, Updater>(\n        this: any,\n        props: Props,\n        context: Context,\n        updater: Updater\n    ) {\n        this.props = props;\n        this.context = context;\n        this.updater = updater;\n\n        this.MoizedComponent = reactMoizer(fn);\n    }\n\n    Moized.prototype.isReactComponent = {};\n\n    Moized.prototype.render = function (): ReturnType<MoizeableFn> {\n        return {\n            $$typeof: REACT_ELEMENT_TYPE,\n            type: this.MoizedComponent,\n            props: this.props,\n            ref: null,\n            key: null,\n            _owner: null,\n        } as ReturnType<MoizeableFn>;\n    };\n\n    copyStaticProperties(fn, Moized, ['contextType', 'contextTypes']);\n\n    Moized.displayName = `Moized(${fn.displayName || fn.name || 'Component'})`;\n\n    setName(Moized as MoizedFunction, fn.name, options.profileName);\n\n    return Moized;\n}\n","import type { Key } from '../index.d';\n\nexport function createGetInitialArgs(size: number) {\n    /**\n     * @private\n     *\n     * @description\n     * take the first N number of items from the array (faster than slice)\n     *\n     * @param args the args to take from\n     * @returns the shortened list of args as an array\n     */\n    return function (args: Key): Key {\n        if (size >= args.length) {\n            return args;\n        }\n\n        if (size === 0) {\n            return [];\n        }\n\n        if (size === 1) {\n            return [args[0]];\n        }\n\n        if (size === 2) {\n            return [args[0], args[1]];\n        }\n\n        if (size === 3) {\n            return [args[0], args[1], args[2]];\n        }\n\n        const clone = [];\n\n        for (let index = 0; index < size; index++) {\n            clone[index] = args[index];\n        }\n\n        return clone;\n    };\n}\n","import type { Key, Moizeable, Options } from '../index.d';\n\n/**\n * @function getCutoff\n *\n * @description\n * faster `Array.prototype.indexOf` implementation build for slicing / splicing\n *\n * @param array the array to match the value in\n * @param value the value to match\n * @returns the matching index, or -1\n */\nfunction getCutoff(array: any[], value: any) {\n    const { length } = array;\n\n    for (let index = 0; index < length; ++index) {\n        if (array[index] === value) {\n            return index + 1;\n        }\n    }\n\n    return 0;\n}\n\n/**\n * @private\n *\n * @description\n * custom replacer for the stringify function\n *\n * @returns if function then toString of it, else the value itself\n */\nexport function createDefaultReplacer() {\n    const cache: any[] = [];\n    const keys: string[] = [];\n\n    return function defaultReplacer(key: string, value: any) {\n        const type = typeof value;\n\n        if (type === 'function' || type === 'symbol') {\n            return value.toString();\n        }\n\n        if (typeof value === 'object') {\n            if (cache.length) {\n                const thisCutoff = getCutoff(cache, this);\n\n                if (thisCutoff === 0) {\n                    cache[cache.length] = this;\n                } else {\n                    cache.splice(thisCutoff);\n                    keys.splice(thisCutoff);\n                }\n\n                keys[keys.length] = key;\n\n                const valueCutoff = getCutoff(cache, value);\n\n                if (valueCutoff !== 0) {\n                    return `[ref=${\n                        keys.slice(0, valueCutoff).join('.') || '.'\n                    }]`;\n                }\n            } else {\n                cache[0] = value;\n                keys[0] = key;\n            }\n\n            return value;\n        }\n\n        return '' + value;\n    };\n}\n\n/**\n * @private\n *\n * @description\n * get the stringified version of the argument passed\n *\n * @param arg argument to stringify\n * @returns the stringified argument\n */\nexport function getStringifiedArgument<Type>(arg: Type) {\n    const typeOfArg = typeof arg;\n\n    return arg && (typeOfArg === 'object' || typeOfArg === 'function')\n        ? JSON.stringify(arg, createDefaultReplacer())\n        : arg;\n}\n\n/**\n * @private\n *\n * @description\n * serialize the arguments passed\n *\n * @param options the options passed to the moizer\n * @param options.maxArgs the cap on the number of arguments used in serialization\n * @returns argument serialization method\n */\nexport function defaultArgumentSerializer(args: Key) {\n    let key = '|';\n\n    for (let index = 0; index < args.length; index++) {\n        key += getStringifiedArgument(args[index]) + '|';\n    }\n\n    return [key];\n}\n\n/**\n * @private\n *\n * @description\n * based on the options passed, either use the serializer passed or generate the internal one\n *\n * @param options the options passed to the moized function\n * @returns the function to use in serializing the arguments\n */\nexport function getSerializerFunction<MoizeableFn extends Moizeable>(\n    options: Options<MoizeableFn>\n) {\n    return typeof options.serializer === 'function'\n        ? options.serializer\n        : defaultArgumentSerializer;\n}\n\n/**\n * @private\n *\n * @description\n * are the serialized keys equal to one another\n *\n * @param cacheKey the cache key to compare\n * @param key the key to test\n * @returns are the keys equal\n */\nexport function getIsSerializedKeyEqual(cacheKey: Key, key: Key) {\n    return cacheKey[0] === key[0];\n}\n","import { deepEqual, sameValueZeroEqual, shallowEqual } from 'fast-equals';\nimport { createGetInitialArgs } from './maxArgs';\nimport { getIsSerializedKeyEqual, getSerializerFunction } from './serialize';\nimport { compose } from './utils';\n\nimport type {\n    Cache,\n    IsEqual,\n    IsMatchingKey,\n    MicroMemoizeOptions,\n    Moizeable,\n    Moized,\n    OnCacheOperation,\n    Options,\n    TransformKey,\n} from '../index.d';\n\nexport function createOnCacheOperation<MoizeableFn extends Moizeable>(\n    fn?: OnCacheOperation<MoizeableFn>\n): OnCacheOperation<MoizeableFn> {\n    if (typeof fn === 'function') {\n        return (\n            _cacheIgnored: Cache<MoizeableFn>,\n            _microMemoizeOptionsIgnored: MicroMemoizeOptions<MoizeableFn>,\n            memoized: Moized\n        ): void => fn(memoized.cache, memoized.options, memoized);\n    }\n}\n\n/**\n * @private\n *\n * @description\n * get the isEqual method passed to micro-memoize\n *\n * @param options the options passed to the moizer\n * @returns the isEqual method to apply\n */\nexport function getIsEqual<MoizeableFn extends Moizeable>(\n    options: Options<MoizeableFn>\n): IsEqual {\n    return (\n        options.matchesArg ||\n        (options.isDeepEqual && deepEqual) ||\n        (options.isShallowEqual && shallowEqual) ||\n        sameValueZeroEqual\n    );\n}\n\n/**\n * @private\n *\n * @description\n * get the isEqual method passed to micro-memoize\n *\n * @param options the options passed to the moizer\n * @returns the isEqual method to apply\n */\nexport function getIsMatchingKey<MoizeableFn extends Moizeable>(\n    options: Options<MoizeableFn>\n): IsMatchingKey | undefined {\n    return (\n        options.matchesKey ||\n        (options.isSerialized && getIsSerializedKeyEqual) ||\n        undefined\n    );\n}\n\n/**\n * @private\n *\n * @description\n * get the function that will transform the key based on the arguments passed\n *\n * @param options the options passed to the moizer\n * @returns the function to transform the key with\n */\nexport function getTransformKey<MoizeableFn extends Moizeable>(\n    options: Options<MoizeableFn>\n): TransformKey | undefined {\n    return compose(\n        options.isSerialized && getSerializerFunction(options),\n        typeof options.transformArgs === 'function' && options.transformArgs,\n        typeof options.maxArgs === 'number' &&\n            createGetInitialArgs(options.maxArgs)\n    ) as TransformKey;\n}\n","import { copyStaticProperties } from './instance';\n\nimport type { Moized } from '../index.d';\n\nexport function createRefreshableMoized<MoizedFn extends Moized>(\n    moized: MoizedFn\n) {\n    const {\n        options: { updateCacheForKey },\n    } = moized;\n\n    /**\n     * @private\n     *\n     * @description\n     * Wrapper around already-`moize`d function which will intercept the memoization\n     * and call the underlying function directly with the purpose of updating the cache\n     * for the given key.\n     *\n     * Promise values use a tweak of the logic that exists at cache.updateAsyncCache, which\n     * reverts to the original value if the promise is rejected and there was already a cached\n     * value.\n     */\n    const refreshableMoized = function refreshableMoized(\n        this: any,\n        ...args: Parameters<typeof moized.fn>\n    ) {\n        if (!updateCacheForKey(args)) {\n            return moized.apply(this, args);\n        }\n\n        const result = moized.fn.apply(this, args);\n\n        moized.set(args, result);\n\n        return result;\n    } as typeof moized;\n\n    copyStaticProperties(moized, refreshableMoized);\n\n    return refreshableMoized;\n}\n","import memoize from 'micro-memoize';\nimport { createMoizedComponent } from './component';\nimport { DEFAULT_OPTIONS } from './constants';\nimport { createMoizeInstance } from './instance';\nimport { getMaxAgeOptions } from './maxAge';\nimport {\n    createOnCacheOperation,\n    getIsEqual,\n    getIsMatchingKey,\n    getTransformKey,\n} from './options';\nimport {\n    clearStats,\n    collectStats,\n    getDefaultProfileName,\n    getStats,\n    getStatsOptions,\n    statsCache,\n} from './stats';\nimport { createRefreshableMoized } from './updateCacheForKey';\nimport { combine, compose, isMoized, mergeOptions, setName } from './utils';\n\nimport type {\n    Expiration,\n    IsEqual,\n    IsMatchingKey,\n    MicroMemoizeOptions,\n    Moize,\n    Moizeable,\n    Moized,\n    OnExpire,\n    Options,\n    Serialize,\n    TransformKey,\n    UpdateCacheForKey,\n} from '../index.d';\n\n/**\n * @module moize\n */\n\n/**\n * @description\n * memoize a function based its arguments passed, potentially improving runtime performance\n *\n * @example\n * import moize from 'moize';\n *\n * // standard implementation\n * const fn = (foo, bar) => `${foo} ${bar}`;\n * const memoizedFn = moize(fn);\n *\n * // implementation with options\n * const fn = async (id) => get(`http://foo.com/${id}`);\n * const memoizedFn = moize(fn, {isPromise: true, maxSize: 5});\n *\n * // implementation with convenience methods\n * const Foo = ({foo}) => <div>{foo}</div>;\n * const MemoizedFoo = moize.react(Foo);\n *\n * @param fn the function to memoized, or a list of options when currying\n * @param [options=DEFAULT_OPTIONS] the options to apply\n * @returns the memoized function\n */\nconst moize: Moize = function <\n    MoizeableFn extends Moizeable,\n    PassedOptions extends Options<MoizeableFn>\n>(fn: MoizeableFn | PassedOptions, passedOptions?: PassedOptions) {\n    type CombinedOptions = Omit<Options<MoizeableFn>, keyof PassedOptions> &\n        PassedOptions;\n\n    const options: Options<MoizeableFn> = passedOptions || DEFAULT_OPTIONS;\n\n    if (isMoized(fn)) {\n        const moizeable = fn.originalFunction as MoizeableFn;\n        const mergedOptions = mergeOptions(\n            fn.options,\n            options\n        ) as CombinedOptions;\n\n        return moize<MoizeableFn, CombinedOptions>(moizeable, mergedOptions);\n    }\n\n    if (typeof fn === 'object') {\n        return function <\n            CurriedFn extends Moizeable,\n            CurriedOptions extends Options<CurriedFn>\n        >(\n            curriedFn: CurriedFn | CurriedOptions,\n            curriedOptions: CurriedOptions\n        ) {\n            type CombinedCurriedOptions = Omit<\n                CombinedOptions,\n                keyof CurriedOptions\n            > &\n                CurriedOptions;\n\n            if (typeof curriedFn === 'function') {\n                const mergedOptions = mergeOptions(\n                    fn as CombinedOptions,\n                    curriedOptions\n                ) as CombinedCurriedOptions;\n\n                return moize(curriedFn, mergedOptions);\n            }\n\n            const mergedOptions = mergeOptions(\n                fn as CombinedOptions,\n                curriedFn as CurriedOptions\n            );\n\n            return moize(mergedOptions);\n        };\n    }\n\n    if (options.isReact) {\n        return createMoizedComponent(moize, fn, options);\n    }\n\n    const coalescedOptions: Options<MoizeableFn> = {\n        ...DEFAULT_OPTIONS,\n        ...options,\n        maxAge:\n            typeof options.maxAge === 'number' && options.maxAge >= 0\n                ? options.maxAge\n                : DEFAULT_OPTIONS.maxAge,\n        maxArgs:\n            typeof options.maxArgs === 'number' && options.maxArgs >= 0\n                ? options.maxArgs\n                : DEFAULT_OPTIONS.maxArgs,\n        maxSize:\n            typeof options.maxSize === 'number' && options.maxSize >= 0\n                ? options.maxSize\n                : DEFAULT_OPTIONS.maxSize,\n        profileName: options.profileName || getDefaultProfileName(fn),\n    };\n    const expirations: Array<Expiration> = [];\n\n    const {\n        matchesArg: equalsIgnored,\n        isDeepEqual: isDeepEqualIgnored,\n        isPromise,\n        isReact: isReactIgnored,\n        isSerialized: isSerialzedIgnored,\n        isShallowEqual: isShallowEqualIgnored,\n        matchesKey: matchesKeyIgnored,\n        maxAge: maxAgeIgnored,\n        maxArgs: maxArgsIgnored,\n        maxSize,\n        onCacheAdd,\n        onCacheChange,\n        onCacheHit,\n        onExpire: onExpireIgnored,\n        profileName: profileNameIgnored,\n        serializer: serializerIgnored,\n        updateCacheForKey,\n        transformArgs: transformArgsIgnored,\n        updateExpire: updateExpireIgnored,\n        ...customOptions\n    } = coalescedOptions;\n\n    const isEqual = getIsEqual(coalescedOptions);\n    const isMatchingKey = getIsMatchingKey(coalescedOptions);\n\n    const maxAgeOptions = getMaxAgeOptions(\n        expirations,\n        coalescedOptions,\n        isEqual,\n        isMatchingKey\n    );\n    const statsOptions = getStatsOptions(coalescedOptions);\n\n    const transformKey = getTransformKey(coalescedOptions);\n\n    const microMemoizeOptions: MicroMemoizeOptions<MoizeableFn> = {\n        ...customOptions,\n        isEqual,\n        isMatchingKey,\n        isPromise,\n        maxSize,\n        onCacheAdd: createOnCacheOperation(\n            combine(\n                onCacheAdd,\n                maxAgeOptions.onCacheAdd,\n                statsOptions.onCacheAdd\n            )\n        ),\n        onCacheChange: createOnCacheOperation(onCacheChange),\n        onCacheHit: createOnCacheOperation(\n            combine(\n                onCacheHit,\n                maxAgeOptions.onCacheHit,\n                statsOptions.onCacheHit\n            )\n        ),\n        transformKey,\n    };\n\n    const memoized = memoize(fn, microMemoizeOptions);\n\n    let moized = createMoizeInstance<MoizeableFn, CombinedOptions>(memoized, {\n        expirations,\n        options: coalescedOptions,\n        originalFunction: fn,\n    });\n\n    if (updateCacheForKey) {\n        moized = createRefreshableMoized<typeof moized>(moized);\n    }\n\n    setName(moized, (fn as Moizeable).name, options.profileName);\n\n    return moized;\n};\n\n/**\n * @function\n * @name clearStats\n * @memberof module:moize\n * @alias moize.clearStats\n *\n * @description\n * clear all existing stats stored\n */\nmoize.clearStats = clearStats;\n\n/**\n * @function\n * @name collectStats\n * @memberof module:moize\n * @alias moize.collectStats\n *\n * @description\n * start collecting statistics\n */\nmoize.collectStats = collectStats;\n\n/**\n * @function\n * @name compose\n * @memberof module:moize\n * @alias moize.compose\n *\n * @description\n * method to compose moized methods and return a single moized function\n *\n * @param moized the functions to compose\n * @returns the composed function\n */\nmoize.compose = function (...moized: Moize[]) {\n    return compose<Moize>(...moized) || moize;\n};\n\n/**\n * @function\n * @name deep\n * @memberof module:moize\n * @alias moize.deep\n *\n * @description\n * should deep equality check be used\n *\n * @returns the moizer function\n */\nmoize.deep = moize({ isDeepEqual: true });\n\n/**\n * @function\n * @name getStats\n * @memberof module:moize\n * @alias moize.getStats\n *\n * @description\n * get the statistics of a given profile, or overall usage\n *\n * @returns statistics for a given profile or overall usage\n */\nmoize.getStats = getStats;\n\n/**\n * @function\n * @name infinite\n * @memberof module:moize\n * @alias moize.infinite\n *\n * @description\n * a moized method that will remove all limits from the cache size\n *\n * @returns the moizer function\n */\nmoize.infinite = moize({ maxSize: Infinity });\n\n/**\n * @function\n * @name isCollectingStats\n * @memberof module:moize\n * @alias moize.isCollectingStats\n *\n * @description\n * are stats being collected\n *\n * @returns are stats being collected\n */\nmoize.isCollectingStats = function isCollectingStats(): boolean {\n    return statsCache.isCollectingStats;\n};\n\n/**\n * @function\n * @name isMoized\n * @memberof module:moize\n * @alias moize.isMoized\n *\n * @description\n * is the fn passed a moized function\n *\n * @param fn the object to test\n * @returns is fn a moized function\n */\nmoize.isMoized = function isMoized(fn: any): fn is Moized {\n    return typeof fn === 'function' && !!fn.isMoized;\n};\n\n/**\n * @function\n * @name matchesArg\n * @memberof module:moize\n * @alias moize.matchesArg\n *\n * @description\n * a moized method where the arg matching method is the custom one passed\n *\n * @param keyMatcher the method to compare against those in cache\n * @returns the moizer function\n */\nmoize.matchesArg = function (argMatcher: IsEqual) {\n    return moize({ matchesArg: argMatcher });\n};\n\n/**\n * @function\n * @name matchesKey\n * @memberof module:moize\n * @alias moize.matchesKey\n *\n * @description\n * a moized method where the key matching method is the custom one passed\n *\n * @param keyMatcher the method to compare against those in cache\n * @returns the moizer function\n */\nmoize.matchesKey = function (keyMatcher: IsMatchingKey) {\n    return moize({ matchesKey: keyMatcher });\n};\n\nfunction maxAge<MaxAge extends number>(\n    maxAge: MaxAge\n): Moize<{ maxAge: MaxAge }>;\nfunction maxAge<MaxAge extends number, UpdateExpire extends boolean>(\n    maxAge: MaxAge,\n    expireOptions: UpdateExpire\n): Moize<{ maxAge: MaxAge; updateExpire: UpdateExpire }>;\nfunction maxAge<MaxAge extends number, ExpireHandler extends OnExpire>(\n    maxAge: MaxAge,\n    expireOptions: ExpireHandler\n): Moize<{ maxAge: MaxAge; onExpire: ExpireHandler }>;\nfunction maxAge<\n    MaxAge extends number,\n    ExpireHandler extends OnExpire,\n    ExpireOptions extends {\n        onExpire: ExpireHandler;\n    }\n>(\n    maxAge: MaxAge,\n    expireOptions: ExpireOptions\n): Moize<{ maxAge: MaxAge; onExpire: ExpireOptions['onExpire'] }>;\nfunction maxAge<\n    MaxAge extends number,\n    UpdateExpire extends boolean,\n    ExpireOptions extends {\n        updateExpire: UpdateExpire;\n    }\n>(\n    maxAge: MaxAge,\n    expireOptions: ExpireOptions\n): Moize<{ maxAge: MaxAge; updateExpire: UpdateExpire }>;\nfunction maxAge<\n    MaxAge extends number,\n    ExpireHandler extends OnExpire,\n    UpdateExpire extends boolean,\n    ExpireOptions extends {\n        onExpire: ExpireHandler;\n        updateExpire: UpdateExpire;\n    }\n>(\n    maxAge: MaxAge,\n    expireOptions: ExpireOptions\n): Moize<{\n    maxAge: MaxAge;\n    onExpire: ExpireHandler;\n    updateExpire: UpdateExpire;\n}>;\nfunction maxAge<\n    MaxAge extends number,\n    ExpireHandler extends OnExpire,\n    UpdateExpire extends boolean,\n    ExpireOptions extends {\n        onExpire?: ExpireHandler;\n        updateExpire?: UpdateExpire;\n    }\n>(\n    maxAge: MaxAge,\n    expireOptions?: ExpireHandler | UpdateExpire | ExpireOptions\n) {\n    if (expireOptions === true) {\n        return moize({\n            maxAge,\n            updateExpire: expireOptions,\n        });\n    }\n\n    if (typeof expireOptions === 'object') {\n        const { onExpire, updateExpire } = expireOptions;\n\n        return moize({\n            maxAge,\n            onExpire,\n            updateExpire,\n        });\n    }\n\n    if (typeof expireOptions === 'function') {\n        return moize({\n            maxAge,\n            onExpire: expireOptions,\n            updateExpire: true,\n        });\n    }\n\n    return moize({ maxAge });\n}\n\n/**\n * @function\n * @name maxAge\n * @memberof module:moize\n * @alias moize.maxAge\n *\n * @description\n * a moized method where the age of the cache is limited to the number of milliseconds passed\n *\n * @param maxAge the TTL of the value in cache\n * @returns the moizer function\n */\nmoize.maxAge = maxAge;\n\n/**\n * @function\n * @name maxArgs\n * @memberof module:moize\n * @alias moize.maxArgs\n *\n * @description\n * a moized method where the number of arguments used for determining cache is limited to the value passed\n *\n * @param maxArgs the number of args to base the key on\n * @returns the moizer function\n */\nmoize.maxArgs = function maxArgs(maxArgs: number) {\n    return moize({ maxArgs });\n};\n\n/**\n * @function\n * @name maxSize\n * @memberof module:moize\n * @alias moize.maxSize\n *\n * @description\n * a moized method where the total size of the cache is limited to the value passed\n *\n * @param maxSize the maximum size of the cache\n * @returns the moizer function\n */\nmoize.maxSize = function maxSize(maxSize: number) {\n    return moize({ maxSize });\n};\n\n/**\n * @function\n * @name profile\n * @memberof module:moize\n * @alias moize.profile\n *\n * @description\n * a moized method with a profile name\n *\n * @returns the moizer function\n */\nmoize.profile = function (profileName: string) {\n    return moize({ profileName });\n};\n\n/**\n * @function\n * @name promise\n * @memberof module:moize\n * @alias moize.promise\n *\n * @description\n * a moized method specific to caching resolved promise / async values\n *\n * @returns the moizer function\n */\nmoize.promise = moize({\n    isPromise: true,\n    updateExpire: true,\n});\n\n/**\n * @function\n * @name react\n * @memberof module:moize\n * @alias moize.react\n *\n * @description\n * a moized method specific to caching React element values\n *\n * @returns the moizer function\n */\nmoize.react = moize({ isReact: true });\n\n/**\n * @function\n * @name serialize\n * @memberof module:moize\n * @alias moize.serialize\n *\n * @description\n * a moized method that will serialize the arguments passed to use as the cache key\n *\n * @returns the moizer function\n */\nmoize.serialize = moize({ isSerialized: true });\n\n/**\n * @function\n * @name serializeWith\n * @memberof module:moize\n * @alias moize.serializeWith\n *\n * @description\n * a moized method that will serialize the arguments passed to use as the cache key\n * based on the serializer passed\n *\n * @returns the moizer function\n */\nmoize.serializeWith = function (serializer: Serialize) {\n    return moize({ isSerialized: true, serializer });\n};\n\n/**\n * @function\n * @name shallow\n * @memberof module:moize\n * @alias moize.shallow\n *\n * @description\n * should shallow equality check be used\n *\n * @returns the moizer function\n */\nmoize.shallow = moize({ isShallowEqual: true });\n\n/**\n * @function\n * @name transformArgs\n * @memberof module:moize\n * @alias moize.transformArgs\n *\n * @description\n * transform the args to allow for specific cache key comparison\n *\n * @param transformArgs the args transformer\n * @returns the moizer function\n */\nmoize.transformArgs = <Transformer extends TransformKey>(\n    transformArgs: Transformer\n) => moize({ transformArgs });\n\n/**\n * @function\n * @name updateCacheForKey\n * @memberof module:moize\n * @alias moize.updateCacheForKey\n *\n * @description\n * update the cache for a given key when the method passed returns truthy\n *\n * @param updateCacheForKey the method to determine when to update cache\n * @returns the moizer function\n */\nmoize.updateCacheForKey = <UpdateWhen extends UpdateCacheForKey>(\n    updateCacheForKey: UpdateWhen\n) => moize({ updateCacheForKey });\n\n// Add self-referring `default` property for edge-case cross-compatibility of mixed ESM/CommonJS usage.\n// This property is frozen and non-enumerable to avoid visibility on iteration or accidental overrides.\nObject.defineProperty(moize, 'default', {\n    configurable: false,\n    enumerable: false,\n    value: moize,\n    writable: false,\n});\n\nexport default moize;\n"],"names":["DEFAULT_OPTIONS","isDeepEqual","isPromise","isReact","isSerialized","isShallowEqual","matchesArg","undefined","matchesKey","maxAge","maxArgs","maxSize","onExpire","profileName","serializer","updateCacheForKey","transformArgs","updateExpire","combine","functions","reduce","f","g","apply","arguments","compose","findExpirationIndex","expirations","key","index","length","createFindKeyIndex","isEqual","isMatchingKey","areKeysEqual","cacheKey","keys","keysIndex","mergeOptions","originalOptions","newOptions","onCacheAdd","onCacheChange","onCacheHit","isMoized","fn","setName","originalFunctionName","name","Object","defineProperty","configurable","enumerable","value","writable","clearExpiration","shouldRemove","expirationIndex","clearTimeout","timeoutId","splice","createTimeout","expirationMethod","setTimeout","unref","createOnCacheAddSetExpiration","options","cache","moizedOptions","moized","findKeyIndex","keyIndex","values","unshift","push","createOnCacheHitResetExpiration","getMaxAgeOptions","isFinite","statsCache","anonymousProfileNameCounter","isCollectingStats","profiles","hasWarningDisplayed","clearStats","collectStats","createOnCacheAddIncrementCalls","calls","hits","createOnCacheHitIncrementCallsAndHits","getDefaultProfileName","displayName","getUsagePercentage","toFixed","getStats","console","warn","usage","profile","completeStats","completeProfiles","computedProfiles","getStatsOptions","ALWAYS_SKIPPED_PROPERTIES","callee","caller","constructor","prototype","copyStaticProperties","originalFn","newFn","skippedProperties","getOwnPropertyNames","forEach","property","indexOf","descriptor","getOwnPropertyDescriptor","get","set","addInstanceMethods","memoized","clear","_microMemoizeOptions","transformKey","has","cacheSnapshot","remove","existingKey","cutoff","size","updateAsyncCache","orderByLru","addInstanceProperties","moizeOptions","originalFunction","microMemoizeOptions","defineProperties","currentCache","slice","expirationsSnapshot","createMoizeInstance","configuration","REACT_ELEMENT_TYPE","Symbol","for","createMoizedComponent","moizer","reactMoizer","Moized","props","context","updater","MoizedComponent","isReactComponent","render","$$typeof","type","ref","_owner","createGetInitialArgs","args","clone","getCutoff","array","createDefaultReplacer","defaultReplacer","toString","thisCutoff","valueCutoff","join","getStringifiedArgument","arg","typeOfArg","JSON","stringify","defaultArgumentSerializer","getSerializerFunction","getIsSerializedKeyEqual","createOnCacheOperation","_cacheIgnored","_microMemoizeOptionsIgnored","getIsEqual","deepEqual","shallowEqual","sameValueZeroEqual","getIsMatchingKey","getTransformKey","createRefreshableMoized","refreshableMoized","result","moize","passedOptions","moizeable","mergedOptions","curriedFn","curriedOptions","coalescedOptions","customOptions","maxAgeOptions","statsOptions","memoize","deep","infinite","Infinity","argMatcher","keyMatcher","expireOptions","promise","react","serialize","serializeWith","shallow"],"mappings":"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"}