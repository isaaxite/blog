<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png"><link rel="mask-icon" href="/blog/images/logo.svg" color="#222"><meta name="google-site-verification" content="D3uaiX9T8gcr1zBjqu9y67t-0DhGNCa7yyjpQ27T_Co"><meta name="msvalidate.01" content="AFD16F68B2DF363759600CB5E8825AEC"><link rel="stylesheet" href="/blog/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha256-Z1K5uhUaJXA7Ll0XrZ/0JhX4lAtZFpT6jkKrEDT0drU=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"isaaxite.github.io","root":"/blog/","images":"/blog/images","scheme":"Gemini","darkmode":false,"version":"8.14.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/blog/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/blog/js/config.js"></script><meta name="description" content="前言我当前使用的大部分软件都有被 Deb（Chromium、VS Code 等） Appimage （Motrix、Qv2ray等）覆盖到，其他一部分使用 WebApp （Neat Reader、Google Translate等）代替，实在无解则使用 win7 虚拟机（微信、迅雷等）。 最近听闻微信发布了 linux 版本，但实际并无较为正式的公告。仅在一些视频网站偶尔刷到 linux 版本微信"><meta property="og:type" content="article"><meta property="og:title" content="🚧 Linux-Wechat 体验导向的 Flatpak 探索"><meta property="og:url" content="https://isaaxite.github.io/blog/resources/linux-%E8%BD%AF%E4%BB%B6-wechat-cursor%E9%97%AE%E9%A2%98/index.html"><meta property="og:site_name" content="Isaac Kam&#39;s Blog"><meta property="og:description" content="前言我当前使用的大部分软件都有被 Deb（Chromium、VS Code 等） Appimage （Motrix、Qv2ray等）覆盖到，其他一部分使用 WebApp （Neat Reader、Google Translate等）代替，实在无解则使用 win7 虚拟机（微信、迅雷等）。 最近听闻微信发布了 linux 版本，但实际并无较为正式的公告。仅在一些视频网站偶尔刷到 linux 版本微信"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://isaaxite.github.io/blog/resources/linux-%E8%BD%AF%E4%BB%B6-wechat-cursor%E9%97%AE%E9%A2%98/ksnip_20240325-144047.png"><meta property="og:image" content="https://isaaxite.github.io/blog/resources/linux-%E8%BD%AF%E4%BB%B6-wechat-cursor%E9%97%AE%E9%A2%98/ksnip_20240325-143839.png"><meta property="article:published_time" content="2024-03-22T09:21:12.000Z"><meta property="article:modified_time" content="2025-03-07T23:26:45.939Z"><meta property="article:author" content="Isaac Kam"><meta property="article:tag" content="linux"><meta property="article:tag" content="Flatpak"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://isaaxite.github.io/blog/resources/linux-%E8%BD%AF%E4%BB%B6-wechat-cursor%E9%97%AE%E9%A2%98/ksnip_20240325-144047.png"><link rel="canonical" href="https://isaaxite.github.io/blog/resources/linux-%E8%BD%AF%E4%BB%B6-wechat-cursor%E9%97%AE%E9%A2%98/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://isaaxite.github.io/blog/resources/linux-%E8%BD%AF%E4%BB%B6-wechat-cursor%E9%97%AE%E9%A2%98/","path":"resources/linux-软件-wechat-cursor问题/","title":"🚧 Linux-Wechat 体验导向的 Flatpak 探索"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>🚧 Linux-Wechat 体验导向的 Flatpak 探索 | Isaac Kam's Blog</title><noscript><link rel="stylesheet" href="/blog/css/noscript.css"></noscript><link rel="alternate" href="/blog/atom.xml" title="Isaac Kam's Blog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/blog/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Isaac Kam's Blog</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">I am a slow walker, but I never walk backwards.</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-sitemap"><a href="/blog/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li><li class="menu-item menu-item-rss"><a href="/blog/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%83%8C%E6%99%AF"><span class="nav-text">背景</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E5%A4%87"><span class="nav-text">设备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flatpak-%E7%89%88%E6%9C%AC"><span class="nav-text">Flatpak 版本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flatpak-Application"><span class="nav-text">Flatpak Application</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%9E%E8%B7%B5"><span class="nav-text">实践</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E8%B7%B5%E4%B8%80"><span class="nav-text">实践一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E8%B7%B5%E4%BA%8C"><span class="nav-text">实践二</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E8%B7%B5%E4%B8%89"><span class="nav-text">实践三</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E8%B7%B5%E5%9B%9B"><span class="nav-text">实践四</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%8D%E7%9B%98"><span class="nav-text">复盘</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9E%E6%BA%AF%E2%80%9C%E5%AE%9E%E8%B7%B5%E4%B8%89%E2%80%9D"><span class="nav-text">回溯“实践三”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9E%E6%BA%AF%E2%80%9C%E5%AE%9E%E8%B7%B5%E4%BA%8C%E2%80%9D"><span class="nav-text">回溯“实践二”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9E%E6%BA%AF%E2%80%9C%E5%AE%9E%E8%B7%B5%E4%B8%80%E2%80%9D"><span class="nav-text">回溯“实践一”</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E2%80%9C%E6%8E%A8%E6%B5%8B-1%E2%80%9D"><span class="nav-text">验证“推测 1”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E2%80%9C%E6%8E%A8%E6%B5%8B-2%E2%80%9D"><span class="nav-text">验证“推测 2”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E2%80%9C%E6%8E%A8%E6%B5%8B-3%E2%80%9D"><span class="nav-text">验证“推测 3”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E8%AE%BA"><span class="nav-text">结论</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-reset-%E5%8F%82%E6%95%B0"><span class="nav-text">使用 --reset 参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%93%E8%AE%BA-1"><span class="nav-text">结论</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%A9%E5%B1%95%EF%BC%88todo%EF%BC%89"><span class="nav-text">扩展（todo）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%99%84%E5%BD%95"><span class="nav-text">附录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#flatpak-override-help"><span class="nav-text">flatpak override --help</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%92%A4%E9%94%80%E2%80%9C%E8%AE%BE%E7%BD%AE-XCURSOR-PATH%E2%80%9D"><span class="nav-text">撤销“设置 XCURSOR_PATH”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A6%81%E7%94%A8%E2%80%9Cxdg-config-gtk-3-0%E2%80%9D%E7%9B%AE%E5%BD%95"><span class="nav-text">禁用“xdg-config&#x2F;gtk-3.0”目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A6%81%E7%94%A8%E2%80%9C-usr-share-icons-%E2%80%9D%E7%9B%AE%E5%BD%95"><span class="nav-text">禁用“&#x2F;usr&#x2F;share&#x2F;icons&#x2F;”目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%85%E7%A6%81%E7%94%A8%E2%80%9C-home-USER-icons-%E2%80%9D%E7%9B%AE%E5%BD%95"><span class="nav-text">仅禁用“&#x2F;home&#x2F;$USER&#x2F;.icons&#x2F;”目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-text">参考</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Isaac Kam" src="/blog/images/avatar.jpg"><p class="site-author-name" itemprop="name">Isaac Kam</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/blog/archives/"><span class="site-state-item-count">64</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/blog/categories/"><span class="site-state-item-count">31</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/blog/tags/"><span class="site-state-item-count">92</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/isaaxite" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;isaaxite" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="isaacgun:isaacgun@outlook.com" title="E-Mail → isaacgun:isaacgun@outlook.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a></span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://isaaxite.github.io/blog/resources/linux-%E8%BD%AF%E4%BB%B6-wechat-cursor%E9%97%AE%E9%A2%98/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/blog/images/avatar.jpg"><meta itemprop="name" content="Isaac Kam"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Isaac Kam's Blog"><meta itemprop="description" content=""></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="🚧 Linux-Wechat 体验导向的 Flatpak 探索 | Isaac Kam's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">🚧 Linux-Wechat 体验导向的 Flatpak 探索</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2024-03-22 17:21:12" itemprop="dateCreated datePublished" datetime="2024-03-22T17:21:12+08:00">2024-03-22</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-03-08 07:26:45" itemprop="dateModified" datetime="2025-03-08T07:26:45+08:00">2025-03-08</time></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>我当前使用的大部分软件都有被 Deb（Chromium、VS Code 等） Appimage （Motrix、Qv2ray等）覆盖到，其他一部分使用 WebApp （Neat Reader、Google Translate等）代替，实在无解则使用 win7 虚拟机（微信、迅雷等）。</p><p>最近听闻微信发布了 linux 版本，但实际并无较为正式的公告。仅在一些视频网站偶尔刷到 linux 版本微信的演示，才让人对此有了一定的可信度。</p><span id="more"></span><p>在<a target="_blank" rel="noopener" href="https://weixin.qq.com/cgi-bin/readtemplate?lang=zh_CN&t=weixin_faq_list&head=true">微信更新日志</a>中并未提到 linux 版本的发布动作，主页亦无相关下载入口。较为正式的消息来自：</p><blockquote><p>IT之家 3 月 13 日消息，统信软件和麒麟软件宣布，微信（Universal）UOS 版功能全面革新，体验全新升级，新版本现已上架统信应用商店和麒麟软件商店，UOS 用户可直接在统信应用商店搜索“微信（Universal）”下载体验，银河麒麟用户可在银河麒麟桌面操作系统 V10 安装使用。</p><p>据IT之家此前报道，微信将迎来 Linux 原生版重构，支持 X86、ARM、龙芯 LoongArch64 架构，系统方面支持麒麟和统信 UOS。</p><p>——<a target="_blank" rel="noopener" href="https://www.ithome.com/0/755/450.htm">IT之家 | 微信（Universal）UOS &#x2F; 银河麒麟版全新升级：Linux 原生跨平台方案，现已开放下载</a></p></blockquote><p>其他的消息来源有：</p><ul><li><p><a target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/%E5%BE%AE%E4%BF%A1#%E5%BE%AE%E4%BF%A1_Linux_%E5%8E%9F%E7%94%9F%E7%89%88%E9%87%8D%E6%9E%84">Archlinux Wiki | 微信 | 微信 Linux 原生版重构</a>；</p></li><li><p><a target="_blank" rel="noopener" href="https://www.52pojie.cn/thread-1896902-1-1.html">吾爱破解 | [其他] 【国产系统】史诗级更新Linux 微信wechat-beta_1.0.0.150（快来还热乎）</a>。</p></li></ul><p>从<a target="_blank" rel="noopener" href="https://www.spark-app.store/store/sort/chat">星火软件商店</a> 和 <a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/wechat-universal-bwrap">Archlinux wiki</a> 我分别下载了三个版本：微信（Universal）、Freechat 版本微信和 wechat-universal-bwrap 1.0.0.238-13。各有各的问题导致无法使用，不展开。这也是可以预见的，从消息来源中可知，此 linux 版本的微信是面向 UOS 和银河麒麟，目标非我当前所使用的发行版本。当然我估计是可以通过花费时间解决这些使用问题，但私以为性价比过低，因此搁置，抛之脑后。</p><p>缘法妙不可言（估计是推荐机制），后面了解到 <a target="_blank" rel="noopener" href="https://github.com/web1n">web1n</a> 打包了 <a target="_blank" rel="noopener" href="https://github.com/web1n/wechat-universal-flatpak">fatpak 版本的 wechat-universal-flatpak</a>，基于 flatpak 的沙盒特性，我认为可以顺利使用的可能性很大。安装后体验确实如此！基本使用无问题：</p><p><img src="ksnip_20240325-144047.png"></p><p>直接可见的 bug 是 cursor 的样式异常：</p><ul><li><p>cursor 的类型（Adwaita）与全局（Bibata-Modern-Classic）的不一致；</p></li><li><p>尺寸过小，若正常使用的尺寸定位为 10，那么目前的估计是 1；</p></li></ul><p>其他功能性的 bug 按下不讨论。对于这个样式性的 bug，回顾过往使用与安装的 Flatpak 软件，似乎大多是有类似的问题。这是 Flatpak 自身的问题？</p><p>以此引出本文讨论与探索的主题：<em>从解决实际问题——wechat-universal-flatpak 的 cursor 样式异常——探索 Flatpak</em>。</p><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><h2 id="设备"><a href="#设备" class="headerlink" title="设备"></a>设备</h2><blockquote><p>System:<br>Kernel: 5.15.0-76-generic x86_64 bits: 64 compiler: gcc v: 11.3.0 Desktop: Cinnamon 5.8.4<br>tk: GTK 3.24.33 wm: muffin dm: LightDM Distro: Linux Mint 21.2 Victoria base: Ubuntu 22.04 jammy</p><p>Machine:<br>Type: Laptop System: LENOVO product: 82NJ v: Yoga 14sACH 2021 D serial: &lt;superuser required&gt;<br>Chassis: type: 10 v: Yoga 14sACH 2021 D serial: &lt;superuser required&gt;<br>Mobo: LENOVO model: LNVNB161216 v: SDK0T76479 WIN serial: &lt;superuser required&gt; UEFI: LENOVO<br>v: HECN23WW date: 10&#x2F;15&#x2F;2021</p><p>CPU:<br>Info: 8-core model: AMD Ryzen 7 5800HS Creator Edition bits: 64 type: MT MCP arch: Zen 3 rev: 0<br>cache: L1: 512 KiB L2: 4 MiB L3: 16 MiB<br>Speed (MHz): avg: 2705 high: 3887 min&#x2F;max: 1200&#x2F;3200 boost: enabled cores: 1: 2938 2: 578<br>3: 2473 4: 2268 5: 2233 6: 3057 7: 2560 8: 2473 9: 2524 10: 2734 11: 3887 12: 3467 13: 2903<br>14: 2943 15: 2931 16: 3311 bogomips: 102206<br>Flags: avx avx2 ht lm nx pae sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3 svm</p></blockquote><h2 id="Flatpak-版本"><a href="#Flatpak-版本" class="headerlink" title="Flatpak 版本"></a>Flatpak 版本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~ [11:26:56]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak --version</span>                        </span><br><span class="line">Flatpak 1.12.7</span><br></pre></td></tr></table></figure><h2 id="Flatpak-Application"><a href="#Flatpak-Application" class="headerlink" title="Flatpak Application"></a>Flatpak Application</h2><p>保持安装 <code>wechat-universal-flatpak</code> 后状态，不新增 Flatpak 软件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~ [13:07:51]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak list</span></span><br><span class="line">Name                         Application ID                 Version   Branch      Origin        Installation</span><br><span class="line">WeChat                       com.tencent.WeChat             1.0.0.238 master      wechat-origin system</span><br><span class="line">Freedesktop Platform         org.freedesktop.Platform       23.08.14  23.08       flathub       system</span><br><span class="line">Mesa                         …eedesktop.Platform.GL.default 23.3.5    22.08       flathub       system</span><br><span class="line">Mesa (Extra)                 …eedesktop.Platform.GL.default 23.3.5    22.08-extra flathub       system</span><br><span class="line">Mesa                         …eedesktop.Platform.GL.default 24.0.3    23.08       flathub       system</span><br><span class="line">Mesa (Extra)                 …eedesktop.Platform.GL.default 24.0.3    23.08-extra flathub       system</span><br><span class="line">openh264                     …freedesktop.Platform.openh264 2.1.0     2.2.0       flathub       system</span><br><span class="line">GNOME Application Platform … org.gnome.Platform                       44          flathub       system</span><br><span class="line">GMetronome                   ….gnome.gitlab.dqpb.GMetronome 0.3.2     stable      flathub       system</span><br><span class="line">Mint-Y-Aqua Gtk Theme        org.gtk.Gtk3theme.Mint-Y-Aqua            3.22        flathub       system</span><br></pre></td></tr></table></figure><h1 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h1><p>wechat-universal-flatpak 的 cursor 样式异常，这个问题据目前可知的信息，可以推断是与 Flatpak 相关性更大而非微信本身。因此，根据 Flatpak 与 cursor 样式做一定的资料搜集，以及解决方案的搜索。下面是经过滤后较有可行性的方案：</p><h2 id="实践一"><a href="#实践一" class="headerlink" title="实践一"></a>实践一</h2><p>从 <a target="_blank" rel="noopener" href="https://www.reddit.com/r/flatpak/comments/rxnyh7/flatpak_app_changing_cursor_theme_and_size_is/">Reddit | Flatpak App Changing Cursor Theme And Size (Is This Normal Behavior?)</a> 的一个评论中得到一个解决方案，在此评论的回复中不少人表示有效：</p><blockquote><p><a target="_blank" rel="noopener" href="https://www.reddit.com/user/Relevant_Ferret8075/">@Relevant_Ferret8075</a><br>Try these commands:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flatpak --user override --filesystem=/home/$USER/.icons/:ro</span><br><span class="line">flatpak --user override --filesystem=/usr/share/icons/:ro</span><br></pre></td></tr></table></figure></blockquote><p>根据评论中给出的 2 条命令在终端执行，结果是顺利执行无报错，但遗憾的是并未解决。</p><p>PS：<em>为一定程度的严谨性，在执行命令后会重启微信，后面的每次实践可能的解决方案亦会重复此步骤。</em></p><h2 id="实践二"><a href="#实践二" class="headerlink" title="实践二"></a>实践二</h2><p>从 <a target="_blank" rel="noopener" href="https://github.com/flatpak/flatpak/issues/709#issuecomment-1381482007">Github issue | flatpak&#x2F;flatpak | Different cursor theme in flatpak apps #709 | the solution too on Linux Mint</a> 得到相对更全面的方案。且评论中的用户使用的发行版与当前实验的接近（见背景说明）。</p><blockquote><p><a target="_blank" rel="noopener" href="https://github.com/garfieldairlines">@garfieldairlines</a> commented on Jan 13, 2023<br>That was the solution too on Linux Mint, thank you I was getting crazy !</p><blockquote><p>As of Jan 12th, 2023, I ran the following commands (in this order) on Fedora 37 (Gnome 43) and all my Flatpak apps now see the correct cursor icons:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/share/icons ~/.icons -r</span><br><span class="line">flatpak --user override --filesystem=/home/$USER/.icons/:ro </span><br><span class="line">flatpak --user override --filesystem=/usr/share/icons/:ro</span><br><span class="line">flatpak override --user --env=XCURSOR_PATH=~/.icons</span><br><span class="line">flatpak override --user --filesystem=xdg-config/gtk-3.0:ro</span><br></pre></td></tr></table></figure></blockquote></blockquote><p>这个方案中增加了对 <code>xdg-config/gtk-3.0</code> 目录访问权限的用户级别的覆盖，和设置 <code>XCURSOR_PATH</code> 环境变量。</p><p>实践新增内容部分，结果是顺利执行无报错，但遗憾的是并未解决。</p><h2 id="实践三"><a href="#实践三" class="headerlink" title="实践三"></a>实践三</h2><p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Flatpak#">Archlinux Wiki | Flatpak</a> 有着关于 Flatpak 较为全面的信息，其中 <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Flatpak#Applications_do_not_use_the_correct_cursor_theme">Archlinux Wiki | Flatpak | Troubleshooting | Applications do not use the correct cursor theme</a> 更是直指 Flatpak 的 cursor 问题，一定程度上也印证了前面关于 cursor 异常的推测。</p><blockquote><p><strong>5.6 Applications do not use the correct cursor theme</strong><br>Applications do not use the correct cursor theme<br>There is no single standard to set the cursor properly. Some programs only need read access to the cursors directory, others also rely on other mechanisms. For <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/GTK">GTK</a> applications, ensure that <a target="_blank" rel="noopener" href="https://archlinux.org/packages/?name=xdg-desktop-portal-gtk">xdg-desktop-portal-gtk</a> is installed.</p><p>Otherwise, the following overrides should work for most common desktop applications.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ flatpak -u override --filesystem=/usr/share/icons/:ro</span><br><span class="line">$ flatpak -u override --filesystem=/home/$USER/.icons/:ro </span><br><span class="line">$ flatpak -u override --filesystem=xdg-config/gtk-3.0:ro</span><br><span class="line">$ flatpak -u override --env=XCURSOR_PATH=~/.icons</span><br></pre></td></tr></table></figure><p>In some cases you may also need to override the environment variables <code>XCURSOR_THEME</code> and <code>XCURSOR_SIZE</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ flatpak -u override --env=XCURSOR_THEME=Adwaita</span><br><span class="line">$ flatpak -u override --env=XCURSOR_SIZE=24</span><br></pre></td></tr></table></figure><p>See <a target="_blank" rel="noopener" href="https://github.com/flatpak/flatpak/issues/709">this discussion</a> for additional details.</p></blockquote><p>相比实践一、二，增加的是 <code>XCURSOR_THEME</code> 和 <code>XCURSOR_SIZE</code> 环境变量的设置。</p><p>实践新增内容部分，结果是顺利执行无报错，但遗憾的是并未解决。</p><h2 id="实践四"><a href="#实践四" class="headerlink" title="实践四"></a>实践四</h2><p>以上三个方案是过滤后，目前解决问题可能性最大的，至少当前未发现更加有用的信息。根据以上的资料，做出合理的推论，应大概率可以解决（毕竟已经常见到被明确收录进 Wiki 的问题），但经实践后依然未达预期。此刻当做二次梳理以排除误操作。</p><p>实践三中 <code>XCURSOR_THEME</code> 和 <code>XCURSOR_SIZE</code> 根据语义推测应分别是指定 cursor 的类型和尺寸。尝试调整尺寸以判断是否因设置的尺寸太小迷惑导致无效的假象。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flatpak --user override --env=XCURSOR_SIZE=48</span><br></pre></td></tr></table></figure><p>调整为原来的一倍。结果是顺利执行无报错，但无变化。</p><p>再检查前面设置的目录：</p><p><code>/usr/share/icons/</code>：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> /usr/share/icons/</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tree -L 1</span>  </span><br><span class="line">.</span><br><span class="line">├── Adwaita</span><br><span class="line">├── Bibata-Modern-Classic</span><br><span class="line">├── ...</span><br><span class="line">└── Yaru-viridian-dark</span><br><span class="line"></span><br><span class="line">88 directories, 2 files</span><br></pre></td></tr></table></figure><p><code>/home/$USER/.icons/</code>：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> ~/.icons</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tree -L 1</span></span><br><span class="line">.</span><br><span class="line">└── icons</span><br><span class="line"></span><br><span class="line">1 directory, 0 files</span><br></pre></td></tr></table></figure><p>此目录下仅 <code>icons</code> 一个。回顾<strong>实践二</strong>中执行的其中一条命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/share/icons ~/.icons -r</span><br></pre></td></tr></table></figure><p><code>icons</code> 目录是由 <code>/usr/share/icons</code> 拷贝而来，说明 <code>～/.icons/</code> 原本是空的。</p><p><strong>实践二</strong>中执行的其中另外一条命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flatpak override --user --env=XCURSOR_PATH=~/.icons</span><br></pre></td></tr></table></figure><p>打印 <code>wechat-universal-flatpak</code> 的状态信息：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak info -M com.tencent.WeChat master</span>    </span><br><span class="line">[Context]</span><br><span class="line">shared=network;ipc;</span><br><span class="line">sockets=x11;pulseaudio;</span><br><span class="line">devices=all;</span><br><span class="line">features=devel;</span><br><span class="line">filesystems=xdg-download;xdg-pictures;xdg-music;xdg-config/gtk-3.0:ro;\</span><br><span class="line">  /home/isaac/.icons:ro;xdg-config/fontconfig:ro;/usr/share/icons:ro;</span><br><span class="line">persistent=.xwechat;xwechat_files;</span><br><span class="line">unset-environment=QT_QPA_PLATFORM;</span><br><span class="line"></span><br><span class="line">[Session Bus Policy]</span><br><span class="line">org.kde.StatusNotifierWatcher=talk</span><br><span class="line">org.freedesktop.Notifications=talk</span><br><span class="line">org.kde.*=own</span><br><span class="line"></span><br><span class="line">[Environment]</span><br><span class="line">XCURSOR_THEME=Adwaita</span><br><span class="line">QT_QPA_PLATFORM=</span><br><span class="line">XCURSOR_PATH=~/.icons</span><br><span class="line">QT_AUTO_SCREEN_SCALE_FACTOR=1</span><br><span class="line">XCURSOR_SIZE=48</span><br></pre></td></tr></table></figure><p>确实已经成功设置 <code>XCURSOR_PATH</code>，根据语义推断是 cursor 的主题类型目录。结合以上信息，<code>XCURSOR_PATH</code> 应设置为 <code>XCURSOR_PATH=~/.icons/icons/</code> 或 将 <code>~/.icons/icons/</code> 目录的内容转移到 <code>~/.icons/</code> 目录下。</p><p>此处为保持统一，选择后者。实践变动的部分，结果是顺利执行无报错，重启微信后，确实生效！</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [21:45:54]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mv</span> ~/.icons/icons/* ~/.icons/</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [21:46:32] C:1</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">rm</span> -rf icons</span></span><br></pre></td></tr></table></figure><p><img src="ksnip_20240325-143839.png"></p><h1 id="复盘"><a href="#复盘" class="headerlink" title="复盘"></a>复盘</h1><p>虽然在实践四中问题得到了解决，但实际导致异常的原因仍然未明了，那些是有效的、那些是无效的设置。逐步回溯。</p><h2 id="回溯“实践三”"><a href="#回溯“实践三”" class="headerlink" title="回溯“实践三”"></a>回溯“实践三”</h2><p>在实践三中，设置了两个环境变量：<code>XCURSOR_THEME</code> 和 <code>XCURSOR_SIZE</code>。因此，需对此进行撤销。从 <code>flatpak override --help</code>（<a href="#flatpak-override-help">见附录</a>）可以得到撤销的方法：</p><blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak override --<span class="built_in">help</span></span></span><br><span class="line">Usage:</span><br><span class="line"> flatpak override [OPTION…] [APP] - Override settings [for application]</span><br><span class="line">  ...</span><br><span class="line">Application Options:</span><br><span class="line">  ...</span><br><span class="line">  --unset-env=VAR                         Remove variable from environment</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure></blockquote><p>由此可得：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak --user override --unset-env=XCURSOR_THEME</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak --user override --unset-env=XCURSOR_SIZE</span></span><br></pre></td></tr></table></figure><p>执行以上命令，结果是顺利执行无报错。打印状态确认已生效，见：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak info -M com.tencent.WeChat master</span>                 </span><br><span class="line">[Context]</span><br><span class="line">shared=network;ipc;</span><br><span class="line">sockets=x11;pulseaudio;</span><br><span class="line">devices=all;</span><br><span class="line">features=devel;</span><br><span class="line">filesystems=xdg-download;xdg-pictures;xdg-music;xdg-config/gtk-3.0:ro;/home/isaac/.icons:ro;xdg-config/fontconfig:ro;/usr/share/icons:ro;</span><br><span class="line">persistent=.xwechat;xwechat_files;</span><br><span class="line">unset-environment=XCURSOR_THEME;QT_QPA_PLATFORM;XCURSOR_SIZE;</span><br><span class="line"></span><br><span class="line">[Session Bus Policy]</span><br><span class="line">org.kde.StatusNotifierWatcher=talk</span><br><span class="line">org.freedesktop.Notifications=talk</span><br><span class="line">org.kde.*=own</span><br><span class="line"></span><br><span class="line">[Environment]</span><br><span class="line">XCURSOR_THEME=</span><br><span class="line">QT_QPA_PLATFORM=</span><br><span class="line">XCURSOR_PATH=~/.icons/icons/</span><br><span class="line">QT_AUTO_SCREEN_SCALE_FACTOR=1</span><br><span class="line">XCURSOR_SIZE=</span><br></pre></td></tr></table></figure><p>重启微信的结果：异常出现。</p><p>为避免默认的 cursor 尺寸过小导致误判，重设 <code>XCURSOR_SIZE</code> 为 <code>48</code>。设置后，重启微信，异常依旧。</p><p><em>可以判断 <code>XCURSOR_THEME</code> 无默认值，且需要手动设置。</em></p><p>撤销以上，仅设置 <code>XCURSOR_THEME=Adwaita</code>。重启微信的结果：异常消失，cursor 大小正常。</p><p><em>可以判断 <code>XCURSOR_SIZE</code> 有默认值，无需要手动设置。</em></p><h2 id="回溯“实践二”"><a href="#回溯“实践二”" class="headerlink" title="回溯“实践二”"></a>回溯“实践二”</h2><p>在实践二中，覆盖了 <code>xdg-config/gtk-3.0</code> 目录，以及设置了 <code>XCURSOR_PATH</code> 环境变量。</p><p>接下来将保留<strong>回溯“实践三”</strong>的结果分别撤销二者，以判断覆盖 <code>xdg-config/gtk-3.0</code> 目录的必要性，以及 <code>XCURSOR_PATH</code> 是否有默认值且为 <code>/home/$USER/.icons/</code> 或 <code>/usr/share/icons/</code> 两者之一。</p><p>撤销环境变量的方法见上，撤销目录覆盖的方法参考 <code>flatpak override --help</code>（<a href="#flatpak-override-help">见附录</a>），并无撤销的方法，但存在可选参数——<code>--nofilesystem</code>，根据参数的描述可知，此参数类似禁用的作用。如此亦不影响实验目的。</p><blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak override --<span class="built_in">help</span></span></span><br><span class="line">Usage:</span><br><span class="line"> flatpak override [OPTION…] [APP] - Override settings [for application]</span><br><span class="line"> ...</span><br><span class="line">Application Options:</span><br><span class="line"> ...</span><br><span class="line"> --filesystem=FILESYSTEM[:ro]            Expose filesystem to app (:ro for read-only)</span><br><span class="line"> --nofilesystem=FILESYSTEM               Don&#x27;t expose filesystem to app</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure></blockquote><p>撤销 <code>XCURSOR_PATH</code>，撤销成功（已打印状态确认，见<a href="#%E6%92%A4%E9%94%80%E2%80%9C%E8%AE%BE%E7%BD%AE-XCURSOR-PATH%E2%80%9D">附录-撤销“设置 XCURSOR_PATH”</a>），重启微信的结果：无异常。</p><p><em>可以判断 <code>XCURSOR_PATH</code> 有默认值，且为 <code>/home/$USER/.icons/</code> 或 <code>/usr/share/icons/</code> 两者之一，<code>XCURSOR_PATH</code> 无需手动设置。</em></p><p><em>另外也进一步确认 <code>--unset-env</code> 的作用是撤销而非禁用。</em></p><p>撤销覆盖 <code>xdg-config/gtk-3.0</code>：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak --user override --nofilesystem=xdg-config/gtk-3.0</span></span><br></pre></td></tr></table></figure><p>据打印的状态（详细见<a href="#%E7%A6%81%E7%94%A8%E2%80%9Cxdg-config-x2F-gtk-3-0%E2%80%9D%E7%9B%AE%E5%BD%95">附录-禁用“xdg-config-x2F-gtk-3-0”目录</a>）：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">filesystems=xdg-download;xdg-pictures;xdg-music;!xdg-config/gtk-3.0;/home/isaac/.icons:ro;xdg-config/fontconfig:ro;/usr/share/icons:ro;</span><br><span class="line">persistent=.xwechat;xwechat_files;</span><br></pre></td></tr></table></figure><p>确为“禁用”操作，且已禁用成功。重启微信的结果：无异常。</p><p><em>可以判断无需覆盖 <code>xdg-config/gtk-3.0</code> 目录。</em></p><h2 id="回溯“实践一”"><a href="#回溯“实践一”" class="headerlink" title="回溯“实践一”"></a>回溯“实践一”</h2><p>实践一中分别覆盖了 <code>/home/$USER/.icons/</code> 和 <code>/usr/share/icons/</code>，由以上可知，这两目录都是主题相关的。</p><p>由<a href="#%E5%9B%9E%E6%BA%AF%E2%80%9C%E5%AE%9E%E8%B7%B5%E4%B8%89%E2%80%9D"><strong>回溯“实践三”</strong></a>中的结论——<code>XCURSOR_THEME</code> 无默认值，且需要手动设置——且 <code>--nofilesystem</code> 的作用是禁用而非撤销（见<a href="#%E5%9B%9E%E6%BA%AF%E2%80%9C%E5%AE%9E%E8%B7%B5%E4%BA%8C%E2%80%9D">回溯“实践二”</a>），因此当前暂无方案验证仅仅设置 <code>XCURSOR_THEME</code> 即可解决异常（可以使用虚拟机隔离或重装 Flatpak 环境，但性价比过大，搁置之）。</p><p>下面将通过分别禁用以上两个目录，以验证那个目录是非必要覆盖的，同样验证 <code>XCURSOR_PATH</code> 默认值。</p><p>仅禁用 <code>/usr/share/icons/</code>，确认禁用成功，详见<a href="#%E7%A6%81%E7%94%A8%E2%80%9C-x2F-usr-x2F-share-x2F-icons-x2F-%E2%80%9D%E7%9B%AE%E5%BD%95">附录-禁用 “&#x2F;usr&#x2F;share&#x2F;icons&#x2F;” 目录</a>，重启微信的结果：无异常。</p><p>仅禁用 <code>/home/$USER/.icons/</code>，使用 <code>--filesystem</code> 再次覆盖 <code>/usr/share/icons/</code>，以撤销上面的操作，确认禁用 <code>/home/$USER/.icons/</code> 成功，详见<a href="#%E4%BB%85%E7%A6%81%E7%94%A8%E2%80%9C-x2F-home-x2F-USER-x2F-icons-x2F-%E2%80%9D%E7%9B%AE%E5%BD%95">仅禁用 “&#x2F;home&#x2F;$USER&#x2F;.icons&#x2F;” 目录</a>），重启微信的结果：无异常。</p><p><em>出现了意料之外的情况（预期以上两次操作之一会导致异常再次出现）！</em></p><p>根据目前情况有以下推测：</p><ol><li><p><code>XCURSOR_PATH</code> 的默认值非 <code>/home/$USER/.icons/</code> 或 <code>/usr/share/icons/</code>，而是存在第三个路径；</p></li><li><p><code>XCURSOR_THEME</code> 的默认值非单一固定值，可能是一个由 <code>/home/$USER/.icons/</code> 和 <code>/usr/share/icons/</code> 组成的具有优先级的队列；</p></li><li><p><code>--nofilesystem</code> 不是预期的禁用效果，而是其他。</p></li></ol><h3 id="验证“推测-1”"><a href="#验证“推测-1”" class="headerlink" title="验证“推测 1”"></a>验证“推测 1”</h3><p>由于不确定 <code>--nofilesystem</code> 的作用，当前选择“删除法”，分别删除 <code>/home/$USER/.icons/</code> 或 <code>/usr/share/icons/</code> 以验证 推测 1，若删除两者依然无异常则推测 1 成立。</p><p>为避免多余干扰，先使用 <code>--filesystem</code> 撤销 <code>--nofilesystem</code> 下的作用：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flatpak --user override --filesystem=/home/$USER/.icons/:ro </span><br><span class="line">flatpak --user override --filesystem=/usr/share/icons/:ro</span><br></pre></td></tr></table></figure><p>首先删除 <code>/home/$USER/.icons/icons/</code> 目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [16:36:10]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">rm</span> -rf ~/.icons/icons</span>  </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [16:39:01]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tree -L 1</span></span><br><span class="line">.</span><br><span class="line"></span><br><span class="line">0 directories, 0 files</span><br></pre></td></tr></table></figure><p>重启微信的结果：无异常。</p><p>接着删除 <code>/usr/share/icons/</code>目录。由于 <code>/usr/share/icons/</code> 目录是 root 层级的，直接删除为危险操作，不可取！</p><p>由以上信息知，cursor 使用主题是 <code>Adwaita</code>，因此可通过备份且移除 <code>/usr/share/icons/</code> 下的 <code>Adwaita</code> 目录，模拟“删除”的效果。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [16:39:06]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> ~/backup/</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> /usr/share/icons [16:41:18]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> <span class="built_in">mv</span> ./Adwaita ~/backup/</span></span><br><span class="line">[sudo] password for isaac: *******</span><br></pre></td></tr></table></figure><p>重启微信的结果：异常复现。</p><p><em>可以推翻推测 1，XCURSOR_PATH 的默认值在 <code>/home/$USER/.icons/icons/</code> 和<code>/usr/share/icons/</code> 中，而非第三路径。</em></p><h3 id="验证“推测-2”"><a href="#验证“推测-2”" class="headerlink" title="验证“推测 2”"></a>验证“推测 2”</h3><p>基于<a href="#%E9%AA%8C%E8%AF%81%E2%80%9C%E6%8E%A8%E6%B5%8B-1%E2%80%9D">验证“推测 1”</a>的实验状态，验证推测 2。保持 <code>/usr/share/icons/</code> 下缺少 <code>Adwaita</code> 目录。并拷贝 <code>Adwaita</code> 目录至 <code>/home/$USER/.icons/icons/</code> 目录下。若异常消失，则推论 2 成立。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> /usr/share/icons [17:16:27] C:130</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> -r ~/backup/Adwaita ~/.icons/icons/Adwaita/</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> /usr/share/icons [17:16:44]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> ~/.icons/icons</span> </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons/icons [17:16:55]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tree -L 1</span></span><br><span class="line">.</span><br><span class="line">└── Adwaita</span><br><span class="line"></span><br><span class="line">1 directory, 0 files</span><br></pre></td></tr></table></figure><p>重启微信的结果：无明显变化，异常依旧。</p><p><em>至此，可以推翻推测 2。<code>XCURSOR_THEME</code> 的默认值非是一个由 <code>/home/$USER/.icons/</code> 和 <code>/usr/share/icons/</code> 组成的具有优先级的队列。结合 <a href="#%E9%AA%8C%E8%AF%81%E2%80%9C%E6%8E%A8%E6%B5%8B-1%E2%80%9D">验证“推测 1”</a> 的结论，可以确认 <code>XCURSOR_THEME</code> 的默认值是单一值，且为 <code>/usr/share/icons/</code>。</em></p><p>基于此结论，同时可确认：<em>无需覆盖 <code>/home/$USER/.icons/</code> 目录。</em></p><h3 id="验证“推测-3”"><a href="#验证“推测-3”" class="headerlink" title="验证“推测 3”"></a>验证“推测 3”</h3><p>从 <a href="#%E9%AA%8C%E8%AF%81%E2%80%9C%E6%8E%A8%E6%B5%8B-2%E2%80%9D">验证“推测 2”</a>已知 <code>XCURSOR_THEME</code> 的默认值是 <code>/usr/share/icons/</code>。在恢复 <code>/usr/share/icons/</code> 下的 <code>Adwaita</code> （异常消失）的前提下使用 <code>--nofilesystem</code> “禁用” <code>/usr/share/icons/</code>，若无异常出现，则推测成立。</p><p>拷贝 <code>Adwaita</code> 目录至 <code>/home/$USER/.icons/</code> 目录下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons/icons [17:34:35]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cp</span> -r ~/backup/Adwaita /usr/share/icons/Adwaita/</span>      </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> /usr/share/icons [17:35:37]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tree -L 1</span></span><br><span class="line">.</span><br><span class="line">├── Adwaita</span><br><span class="line">├── ...</span><br><span class="line">└── Yaru-viridian-dark</span><br><span class="line"></span><br><span class="line">88 directories, 2 files</span><br></pre></td></tr></table></figure><p>重启微信的结果：无明显变化，无异常。</p><p>至此，可以确定： <em><code>--nofilesystem</code> 不是预期的禁用效果，而是其他。</em></p><h3 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h3><p>综合三个验证实验可知：导致<a href>回溯“实践一”</a>操作未达预期的原因是：<code>--nofilesystem</code> 不是预期的禁用效果，而是其他。</p><p>若 <code>--nofilesystem</code> 不是预期的禁用效果，那么 <a href="#%E5%9B%9E%E6%BA%AF%E2%80%9C%E5%AE%9E%E8%B7%B5%E4%BA%8C%E2%80%9D">回溯“实践二”</a>中的推论——可以判断无需覆盖 <code>xdg-config/gtk-3.0</code> 目录——也将失效。</p><p>另外，三个验证实验的结果也可确定以下两点：</p><ol><li><p><code>XCURSOR_PATH</code> 的默认值是 <code>/usr/share/icons/</code> 而非 <code>/home/$USER/.icons/</code> 或 <code>/usr/share/icons/</code> 外的第三者；</p></li><li><p><code>XCURSOR_PATH</code> 的默认值是单一值，而非优先级队列。</p></li></ol><p>回顾<a href="#%E5%9B%9E%E6%BA%AF%E2%80%9C%E5%AE%9E%E8%B7%B5%E4%B8%80%E2%80%9D">回溯“实践一”</a>的目的：是为确定以下两条命令是否必要：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flatpak --user override --filesystem=/home/$USER/.icons/:ro</span><br><span class="line">flatpak --user override --filesystem=/usr/share/icons/:ro</span><br></pre></td></tr></table></figure><p>由第 1 点可以断定：<em>针对 <code>/home/$USER/.icons/</code> 目录的覆盖，在当前环境下是没有必要的。</em></p><p>由于 <code>--nofilesystem</code> 的作用未达预期，且暂无其他方式撤销对 <code>/usr/share/icons/</code> 目录的覆盖，因此暂无法确定。</p><p>根据 <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Flatpak#Override_sandbox_permissions_of_applications">Archlinux Wiki | Flatpak | Managing runtimes and applications | Override sandbox permissions of applications</a> 中提到的应该有阻止应用访问目标目录：</p><blockquote><p><strong>3.12 Override sandbox permissions of applications</strong><br>If you find the predefined permissions of the application too lax or too restrictive you can change to anything you want using flatpak override command. For example:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flatpak override --nofilesystem=home name</span><br></pre></td></tr></table></figure><p><mark>This will prevent the application access to your home folder.</mark></p></blockquote><h2 id="使用-reset-参数"><a href="#使用-reset-参数" class="headerlink" title="使用 --reset 参数"></a>使用 <code>--reset</code> 参数</h2><p>在 <code>flatpak override --help</code> 中存在可选参数：<code>--reset</code>，根据描述可知它的作用是移除所有的覆盖操作（详见<a href="#flatpak-override-help">附录</a>）。</p><blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak override --<span class="built_in">help</span></span></span><br><span class="line">Usage:</span><br><span class="line"> flatpak override [OPTION…] [APP] - Override settings [for application]</span><br><span class="line"> ...</span><br><span class="line">Application Options:</span><br><span class="line"> ...</span><br><span class="line"> --reset                                 Remove existing overrides</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure></blockquote><p>但 <code>--reset</code> 实际效果未知，为避免破坏原有的实验状态，故前面使用了回溯法进行实验。就目前情况而言，是时候使用 <code>--reset</code>。</p><p><code>--reset</code> 实验将在<a href="#%E5%AE%9E%E8%B7%B5">实践</a>结果（已解决 cursor 异常）的前提下进行，以一定程度上检验 <code>--reset</code> 的作用。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [22:00:17] C:1</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak --user override --reset</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [22:00:27]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak info -M com.tencent.WeChat master</span>    </span><br><span class="line">[Context]</span><br><span class="line">shared=network;ipc;</span><br><span class="line">sockets=x11;pulseaudio;</span><br><span class="line">devices=all;</span><br><span class="line">features=devel;</span><br><span class="line">filesystems=xdg-download;xdg-pictures;xdg-music;xdg-config/fontconfig:ro;</span><br><span class="line">persistent=.xwechat;xwechat_files;</span><br><span class="line">unset-environment=QT_QPA_PLATFORM;</span><br><span class="line"></span><br><span class="line">[Session Bus Policy]</span><br><span class="line">org.kde.StatusNotifierWatcher=talk</span><br><span class="line">org.freedesktop.Notifications=talk</span><br><span class="line">org.kde.*=own</span><br><span class="line"></span><br><span class="line">[Environment]</span><br><span class="line">QT_QPA_PLATFORM=</span><br><span class="line">QT_AUTO_SCREEN_SCALE_FACTOR=1</span><br></pre></td></tr></table></figure><p>重启微信的结果：异常出现。</p><p><em>从打印的状态信息（实践过程中覆盖的目录和设置的环境变量都从状态信息中消失）和异常再现的现象可以一定程度上认为，<code>--reset</code> 具备重置的作用。</em></p><p>下面将在认定 <code>--reset</code> 将状态重置成功的前提下，进行正向实验：做最小程度的操作解决异常——设置 <code>XCURSOR_THEME=Adwaita</code>：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak --user override --<span class="built_in">env</span>=XCURSOR_THEME=Adwaita</span></span><br></pre></td></tr></table></figure><p>重启微信的结果：异常消失。</p><p><em>可以判断在当前环境下，仅需设置 <code>XCURSOR_THEME=Adwaita</code> 即可解决 wechat-universal-flatpak 的 cursor 样式异常。</em></p><h2 id="结论-1"><a href="#结论-1" class="headerlink" title="结论"></a>结论</h2><p>由于无法完全确定 <code>--reset</code> 的作用，将按 <code>--reset</code> 是否达预期重置作用进行总结。</p><p>当 <code>--reset</code> 达预期重置，则在当前环境下，仅需设置 <code>XCURSOR_THEME=Adwaita</code> 即可解决异常；</p><p>当 <code>--reset</code> 未达预期重置，则可能需要：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak --user override --filesystem=/usr/share/icons/:ro</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak --user override --filesystem=xdg-config/gtk-3.0:ro</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak --user override --<span class="built_in">env</span>=XCURSOR_THEME=Adwaita</span></span><br></pre></td></tr></table></figure><p>下面对实践一至四操作结果进行分析。</p><ul><li><p><strong>实践一</strong>：覆盖了 <code>/home/$USER/.icons/</code> 和 <code>/usr/share/icons/</code>，但未设置 <code>XCURSOR_THEME=Adwaita</code>， 因此未解决异常；</p></li><li><p><strong>实践二</strong>：增量覆盖了 <code>xdg-config/gtk-3.0</code> 和 设置 <code>XCURSOR_PATH=~/.icons</code>，未设置 <code>XCURSOR_THEME=Adwaita</code>， 因此未解决异常；</p></li><li><p><strong>实践三</strong>：增量设置了 <code>XCURSOR_THEME=Adwaita</code> 和 <code>XCURSOR_SIZE=24</code>，前者是有效操作，后者则是冗余的。仍然失败的原因是因实践二中设置了 <code>XCURSOR_PATH=~/.icons</code>，指向了空目录(<code>~/.icons/Adwaita/</code> 是空目录)；</p></li><li><p><strong>实践四</strong>：成功的原因是解决了实践三中的问题——<code>~/.icons/Adwaita/</code> 是空目录。</p></li></ul><h1 id="扩展（todo）"><a href="#扩展（todo）" class="headerlink" title="扩展（todo）"></a>扩展（todo）</h1><ul><li><p>GTK？</p></li><li><p>reddit？</p></li><li><p>archlinux wiki？</p></li><li><p>全文阅读archlinux wiki for flatpak，从中挑选值得记录学习的知识点</p></li><li><p>如何查看 flatpak app 的已经被授予的权限（推荐查阅官方文档，可以参考 <a target="_blank" rel="noopener" href="https://man.archlinux.org/man/flatpak-override.1%EF%BC%8C">https://man.archlinux.org/man/flatpak-override.1，</a> 但需对比官方文档）</p></li><li><p><a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/sandbox-permissions-reference.html">Flatpak documentation | Sandbox Permissions Reference</a>有提到 <code>--nofilesystem</code> 的作用</p></li><li><p>使用 docker 创建隔离环境以实验</p></li><li><p><a target="_blank" rel="noopener" href="https://flathub.org/apps/com.github.tchx84.Flatseal">Flathub | Flatseal</a> 安装，它是什么？</p></li><li><p><a target="_blank" rel="noopener" href="https://github.com/tchx84/Flatseal">Github Repository | tchx84&#x2F;Flatseal</a></p></li></ul><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h2 id="flatpak-override-help"><a href="#flatpak-override-help" class="headerlink" title="flatpak override --help"></a><code>flatpak override --help</code></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak override --<span class="built_in">help</span></span></span><br><span class="line">Usage:</span><br><span class="line">  flatpak override [OPTION…] [APP] - Override settings [for application]</span><br><span class="line"></span><br><span class="line">Help Options:</span><br><span class="line">  -h, --help                              Show help options</span><br><span class="line">  --help-all                              Show all help options</span><br><span class="line"></span><br><span class="line">Application Options:</span><br><span class="line">  --user                                  Work on the user installation</span><br><span class="line">  --system                                Work on the system-wide installation (default)</span><br><span class="line">  --installation=NAME                     Work on a non-default system-wide installation</span><br><span class="line">  --reset                                 Remove existing overrides</span><br><span class="line">  --show                                  Show existing overrides</span><br><span class="line">  -v, --verbose                           Show debug information, -vv for more detail</span><br><span class="line">  --ostree-verbose                        Show OSTree debug information</span><br><span class="line">  --share=SHARE                           Share with host</span><br><span class="line">  --unshare=SHARE                         Unshare with host</span><br><span class="line">  --socket=SOCKET                         Expose socket to app</span><br><span class="line">  --nosocket=SOCKET                       Don&#x27;t expose socket to app</span><br><span class="line">  --device=DEVICE                         Expose device to app</span><br><span class="line">  --nodevice=DEVICE                       Don&#x27;t expose device to app</span><br><span class="line">  --allow=FEATURE                         Allow feature</span><br><span class="line">  --disallow=FEATURE                      Don&#x27;t allow feature</span><br><span class="line">  --filesystem=FILESYSTEM[:ro]            Expose filesystem to app (:ro for read-only)</span><br><span class="line">  --nofilesystem=FILESYSTEM               Don&#x27;t expose filesystem to app</span><br><span class="line">  --env=VAR=VALUE                         Set environment variable</span><br><span class="line">  --env-fd=FD                             Read environment variables in env -0 format from FD</span><br><span class="line">  --unset-env=VAR                         Remove variable from environment</span><br><span class="line">  --own-name=DBUS_NAME                    Allow app to own name on the session bus</span><br><span class="line">  --talk-name=DBUS_NAME                   Allow app to talk to name on the session bus</span><br><span class="line">  --no-talk-name=DBUS_NAME                Don&#x27;t allow app to talk to name on the session bus</span><br><span class="line">  --system-own-name=DBUS_NAME             Allow app to own name on the system bus</span><br><span class="line">  --system-talk-name=DBUS_NAME            Allow app to talk to name on the system bus</span><br><span class="line">  --system-no-talk-name=DBUS_NAME         Don&#x27;t allow app to talk to name on the system bus</span><br><span class="line">  --add-policy=SUBSYSTEM.KEY=VALUE        Add generic policy option</span><br><span class="line">  --remove-policy=SUBSYSTEM.KEY=VALUE     Remove generic policy option</span><br><span class="line">  --persist=FILENAME                      Persist home directory subpath</span><br></pre></td></tr></table></figure><h2 id="撤销“设置-XCURSOR-PATH”"><a href="#撤销“设置-XCURSOR-PATH”" class="headerlink" title="撤销“设置 XCURSOR_PATH”"></a>撤销“设置 XCURSOR_PATH”</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [17:11:23]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak --user override --unset-env=XCURSOR_PATH</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [17:12:42] C:130</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak info -M com.tencent.WeChat master</span>       </span><br><span class="line">[Context]</span><br><span class="line">shared=network;ipc;</span><br><span class="line">sockets=x11;pulseaudio;</span><br><span class="line">devices=all;</span><br><span class="line">features=devel;</span><br><span class="line">filesystems=xdg-download;xdg-pictures;xdg-music;xdg-config/gtk-3.0:ro;/home/isaac/.icons:ro;xdg-config/fontconfig:ro;/usr/share/icons:ro;</span><br><span class="line">persistent=.xwechat;xwechat_files;</span><br><span class="line">unset-environment=QT_QPA_PLATFORM;XCURSOR_PATH;XCURSOR_SIZE;</span><br><span class="line"></span><br><span class="line">[Session Bus Policy]</span><br><span class="line">org.kde.StatusNotifierWatcher=talk</span><br><span class="line">org.freedesktop.Notifications=talk</span><br><span class="line">org.kde.*=own</span><br><span class="line"></span><br><span class="line">[Environment]</span><br><span class="line">XCURSOR_THEME=Adwaita</span><br><span class="line">QT_QPA_PLATFORM=</span><br><span class="line">XCURSOR_PATH=</span><br><span class="line">QT_AUTO_SCREEN_SCALE_FACTOR=1</span><br><span class="line">XCURSOR_SIZE=</span><br></pre></td></tr></table></figure><h2 id="禁用“xdg-config-gtk-3-0”目录"><a href="#禁用“xdg-config-gtk-3-0”目录" class="headerlink" title="禁用“xdg-config&#x2F;gtk-3.0”目录"></a>禁用“xdg-config&#x2F;gtk-3.0”目录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [17:12:43]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak --user override --nofilesystem=xdg-config/gtk-3.0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [17:27:34]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak info -M com.tencent.WeChat master</span>                </span><br><span class="line">[Context]</span><br><span class="line">shared=network;ipc;</span><br><span class="line">sockets=x11;pulseaudio;</span><br><span class="line">devices=all;</span><br><span class="line">features=devel;</span><br><span class="line">filesystems=xdg-download;xdg-pictures;xdg-music;!xdg-config/gtk-3.0;/home/isaac/.icons:ro;xdg-config/fontconfig:ro;/usr/share/icons:ro;</span><br><span class="line">persistent=.xwechat;xwechat_files;</span><br><span class="line">unset-environment=QT_QPA_PLATFORM;XCURSOR_PATH;XCURSOR_SIZE;</span><br><span class="line"></span><br><span class="line">[Session Bus Policy]</span><br><span class="line">org.kde.StatusNotifierWatcher=talk</span><br><span class="line">org.freedesktop.Notifications=talk</span><br><span class="line">org.kde.*=own</span><br><span class="line"></span><br><span class="line">[Environment]</span><br><span class="line">XCURSOR_THEME=Adwaita</span><br><span class="line">QT_QPA_PLATFORM=</span><br><span class="line">XCURSOR_PATH=</span><br><span class="line">QT_AUTO_SCREEN_SCALE_FACTOR=1</span><br><span class="line">XCURSOR_SIZE=</span><br></pre></td></tr></table></figure><h2 id="禁用“-usr-share-icons-”目录"><a href="#禁用“-usr-share-icons-”目录" class="headerlink" title="禁用“&#x2F;usr&#x2F;share&#x2F;icons&#x2F;”目录"></a>禁用“&#x2F;usr&#x2F;share&#x2F;icons&#x2F;”目录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [20:37:58]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak --user override --nofilesystem=/usr/share/icons/</span> </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [20:39:04]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak info -M com.tencent.WeChat master</span>               </span><br><span class="line">[Context]</span><br><span class="line">shared=network;ipc;</span><br><span class="line">sockets=x11;pulseaudio;</span><br><span class="line">devices=all;</span><br><span class="line">features=devel;</span><br><span class="line">filesystems=xdg-download;xdg-pictures;xdg-music;!xdg-config/gtk-3.0;/home/isaac/.icons:ro;xdg-config/fontconfig:ro;!/usr/share/icons;</span><br><span class="line">persistent=.xwechat;xwechat_files;</span><br><span class="line">unset-environment=QT_QPA_PLATFORM;XCURSOR_PATH;XCURSOR_SIZE;</span><br><span class="line"></span><br><span class="line">[Session Bus Policy]</span><br><span class="line">org.kde.StatusNotifierWatcher=talk</span><br><span class="line">org.freedesktop.Notifications=talk</span><br><span class="line">org.kde.*=own</span><br><span class="line"></span><br><span class="line">[Environment]</span><br><span class="line">XCURSOR_THEME=Adwaita</span><br><span class="line">QT_QPA_PLATFORM=</span><br><span class="line">XCURSOR_PATH=</span><br><span class="line">QT_AUTO_SCREEN_SCALE_FACTOR=1</span><br><span class="line">XCURSOR_SIZE=</span><br></pre></td></tr></table></figure><h2 id="仅禁用“-home-USER-icons-”目录"><a href="#仅禁用“-home-USER-icons-”目录" class="headerlink" title="仅禁用“&#x2F;home&#x2F;$USER&#x2F;.icons&#x2F;”目录"></a>仅禁用“&#x2F;home&#x2F;$USER&#x2F;.icons&#x2F;”目录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [20:39:09]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak --user override --filesystem=/usr/share/icons/</span> </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [20:43:36]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak info -M com.tencent.WeChat master</span>             </span><br><span class="line">[Context]</span><br><span class="line">shared=network;ipc;</span><br><span class="line">sockets=x11;pulseaudio;</span><br><span class="line">devices=all;</span><br><span class="line">features=devel;</span><br><span class="line">filesystems=xdg-download;xdg-pictures;xdg-music;!xdg-config/gtk-3.0;/home/isaac/.icons:ro;xdg-config/fontconfig:ro;/usr/share/icons;</span><br><span class="line">persistent=.xwechat;xwechat_files;</span><br><span class="line">unset-environment=QT_QPA_PLATFORM;XCURSOR_PATH;XCURSOR_SIZE;</span><br><span class="line"></span><br><span class="line">[Session Bus Policy]</span><br><span class="line">org.kde.StatusNotifierWatcher=talk</span><br><span class="line">org.freedesktop.Notifications=talk</span><br><span class="line">org.kde.*=own</span><br><span class="line"></span><br><span class="line">[Environment]</span><br><span class="line">XCURSOR_THEME=Adwaita</span><br><span class="line">QT_QPA_PLATFORM=</span><br><span class="line">XCURSOR_PATH=</span><br><span class="line">QT_AUTO_SCREEN_SCALE_FACTOR=1</span><br><span class="line">XCURSOR_SIZE=</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [20:43:40]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak --user override --nofilesystem=/home/<span class="variable">$USER</span>/.icons/</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ Mint-Yoga <span class="keyword">in</span> ~/.icons [20:44:26]</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">flatpak info -M com.tencent.WeChat master</span>                 </span><br><span class="line">[Context]</span><br><span class="line">shared=network;ipc;</span><br><span class="line">sockets=x11;pulseaudio;</span><br><span class="line">devices=all;</span><br><span class="line">features=devel;</span><br><span class="line">filesystems=xdg-download;xdg-pictures;xdg-music;!xdg-config/gtk-3.0;!/home/isaac/.icons;xdg-config/fontconfig:ro;/usr/share/icons;</span><br><span class="line">persistent=.xwechat;xwechat_files;</span><br><span class="line">unset-environment=QT_QPA_PLATFORM;XCURSOR_PATH;XCURSOR_SIZE;</span><br><span class="line"></span><br><span class="line">[Session Bus Policy]</span><br><span class="line">org.kde.StatusNotifierWatcher=talk</span><br><span class="line">org.freedesktop.Notifications=talk</span><br><span class="line">org.kde.*=own</span><br><span class="line"></span><br><span class="line">[Environment]</span><br><span class="line">XCURSOR_THEME=Adwaita</span><br><span class="line">QT_QPA_PLATFORM=</span><br><span class="line">XCURSOR_PATH=</span><br><span class="line">QT_AUTO_SCREEN_SCALE_FACTOR=1</span><br><span class="line">XCURSOR_SIZE=</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><p><a target="_blank" rel="noopener" href="https://github.com/flatpak/flatpak/issues/709">Github issue | flatpak&#x2F;flatpak | Different cursor theme in flatpak apps #709</a></p></li><li><p><a target="_blank" rel="noopener" href="https://github.com/flatpak/flatpak/issues/709#issuecomment-1381482007">Github issue | flatpak&#x2F;flatpak | Different cursor theme in flatpak apps #709 | the solution too on Linux Mint</a></p></li><li><p><a target="_blank" rel="noopener" href="https://www.reddit.com/r/flatpak/comments/rxnyh7/flatpak_app_changing_cursor_theme_and_size_is/">Reddit | Flatpak App Changing Cursor Theme And Size (Is This Normal Behavior?)</a></p></li><li><p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Flatpak#Applications_do_not_use_the_correct_cursor_theme">Archlinux Wiki | Flatpak | Troubleshooting | Applications do not use the correct cursor theme</a></p></li><li><p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Flatpak#Override_sandbox_permissions_of_applications">Archlinux Wiki | Flatpak | Managing runtimes and applications | Override sandbox permissions of applications</a></p></li></ul><ul><li><p><a target="_blank" rel="noopener" href="https://docs.flatpak.org/en/latest/index.html">Official | Flatpak documentation</a></p></li><li><p><a target="_blank" rel="noopener" href="https://archlinux.org/packages/extra/x86_64/xdg-desktop-portal-gtk/">Archlinux Wiki | xdg-desktop-portal-gtk 1.15.1-1</a></p></li><li><p><a target="_blank" rel="noopener" href="https://github.com/flatpak/xdg-desktop-portal-gtk">Github repository | flatpak&#x2F;xdg-desktop-portal-gtk</a></p></li><li><p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/XDG_Desktop_Portal">Archlinux Wiki | XDG Desktop Portal</a></p></li><li><p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Flatpak#Flatpak_applications_not_picking_up_the_default_system_theme">Archlinux Wiki | Flatpak | Flatpak applications not picking up the default system theme</a></p></li><li><p><a target="_blank" rel="noopener" href="https://github.com/flatpak/flatpak/issues/114">Github issue | flatpak&#x2F;flatpak | Apps are not aware of desktop themes #114</a></p></li><li><p><a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/stylepak-git">Archlinux Wiki | stylepak-git 16.124fbdc-1</a></p></li><li><p><a target="_blank" rel="noopener" href="https://www.reddit.com/r/flatpak/comments/uv7nqb/is_there_any_way_to_manually_installcopy_themes/">Reddit | Is there any way to manually install&#x2F;copy themes into flatpak, that aren’t available via flathub?</a></p></li><li><p><a target="_blank" rel="noopener" href="https://github.com/refi64/stylepak">Github repository | refi64&#x2F;stylepak</a></p></li><li><p><a target="_blank" rel="noopener" href="https://weixin.qq.com/cgi-bin/readtemplate?lang=zh_CN&t=weixin_faq_list&head=true">微信更新日志</a></p></li><li><p><a target="_blank" rel="noopener" href="https://www.ithome.com/0/755/450.htm">IT之家 | 微信（Universal）UOS &#x2F; 银河麒麟版全新升级：Linux 原生跨平台方案，现已开放下载</a></p></li></ul></div><footer class="post-footer"><div class="reward-container"><div>Buy me a coffee</div><button>赞赏</button><div class="post-reward"><div><img src="/blog/images/wechatpay.jpg" alt="Isaac Kam 微信"> <span>微信</span></div><div><img src="/blog/images/alipay.jpg" alt="Isaac Kam 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"><strong>本文作者： </strong>Isaac Kam</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://isaaxite.github.io/blog/resources/linux-%E8%BD%AF%E4%BB%B6-wechat-cursor%E9%97%AE%E9%A2%98/" title="🚧 Linux-Wechat 体验导向的 Flatpak 探索">https://isaaxite.github.io/blog/resources/linux-软件-wechat-cursor问题/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="followme"><span>欢迎关注我的其它发布渠道</span><div class="social-list"><div class="social-item"><a target="_blank" class="social-link" href="https://www.zhihu.com/people/issac-79"><span class="icon"><i class="fab | fa-zhihu"></i> </span><span class="label">Zhihu</span></a></div><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i> </span><span class="label">WeChat</span> </span><img class="social-item-img" src="/blog/images/wechat_qrcode.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/blog/atom.xml"><span class="icon"><i class="fa fa-rss"></i> </span><span class="label">RSS</span></a></div><div class="social-item"><a target="_blank" class="social-link" href="https://github.com/isaaxite"><span class="icon"><i class="fab fa-github"></i> </span><span class="label">GitHub</span></a></div><div class="social-item"><a target="_blank" class="social-link" href="isaacgun:isaacgun@outlook.com"><span class="icon"><i class="fa fa-envelope"></i> </span><span class="label">E-Mail</span></a></div></div></div><div class="post-tags"><a href="/blog/tags/linux/" rel="tag"><i class="fa fa-tag"></i> linux</a> <a href="/blog/tags/Flatpak/" rel="tag"><i class="fa fa-tag"></i> Flatpak</a></div><div class="post-nav"><div class="post-nav-item"><a href="/blog/resources/Learn-more-about-the-nodejs-package-manager-npm-pnpm-yarn/" rel="prev" title="Learn more about the nodejs package manager - npm | pnpm | yarn"><i class="fa fa-chevron-left"></i> Learn more about the nodejs package manager - npm | pnpm | yarn</a></div><div class="post-nav-item"><a href="/blog/resources/linux-%E8%BD%AF%E4%BB%B6-tmux/" rel="next" title="Tmux 的相关概念与基本使用">Tmux 的相关概念与基本使用 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments utterances-container"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Isaac Kam</span></div><div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><div class="reading-progress-bar"></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script><script src="/blog/js/comments.js"></script><script src="/blog/js/utils.js"></script><script src="/blog/js/motion.js"></script><script src="/blog/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/blog/js/third-party/search/local-search.js"></script><script src="/blog/js/third-party/fancybox.js"></script><script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"isaaxite/blog","issue_term":"title","theme":"github-light"}</script><script src="/blog/js/third-party/comments/utterances.js"></script></body></html>