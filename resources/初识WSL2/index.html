<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png"><link rel="mask-icon" href="/blog/images/logo.svg" color="#222"><meta name="google-site-verification" content="D3uaiX9T8gcr1zBjqu9y67t-0DhGNCa7yyjpQ27T_Co"><meta name="msvalidate.01" content="AFD16F68B2DF363759600CB5E8825AEC"><link rel="stylesheet" href="/blog/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha256-Z1K5uhUaJXA7Ll0XrZ/0JhX4lAtZFpT6jkKrEDT0drU=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"isaaxite.github.io","root":"/blog/","images":"/blog/images","scheme":"Gemini","darkmode":false,"version":"8.14.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/blog/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/blog/js/config.js"></script><meta name="description" content="前言本文旨在记录WSL2的安装，让WSL基本可用。 接着是Linux发行版本的替换，以至于可以自由选择自己熟悉、喜欢的distribution。 最后，是有选择地介绍WSL的基础配置及其略详细的情况，目的是让WSL可以更加适合开发者使用。如果后面有需要会继续补充常用的配置使用。以及linux发行版本的替换。"><meta property="og:type" content="article"><meta property="og:title" content="初识WSL2"><meta property="og:url" content="https://isaaxite.github.io/blog/resources/%E5%88%9D%E8%AF%86WSL2/index.html"><meta property="og:site_name" content="Isaac Kam&#39;s Blog"><meta property="og:description" content="前言本文旨在记录WSL2的安装，让WSL基本可用。 接着是Linux发行版本的替换，以至于可以自由选择自己熟悉、喜欢的distribution。 最后，是有选择地介绍WSL的基础配置及其略详细的情况，目的是让WSL可以更加适合开发者使用。如果后面有需要会继续补充常用的配置使用。以及linux发行版本的替换。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://isaaxite.github.io/blog/resources/%E5%88%9D%E8%AF%86WSL2/enable-wsl1-windows-10.webp"><meta property="og:image" content="https://isaaxite.github.io/blog/resources/%E5%88%9D%E8%AF%86WSL2/Snipaste_2023-03-12_17-34-36.png"><meta property="og:image" content="https://isaaxite.github.io/blog/resources/%E5%88%9D%E8%AF%86WSL2/Snipaste_2023-03-12_22-58-58.png"><meta property="og:image" content="https://isaaxite.github.io/blog/resources/%E5%88%9D%E8%AF%86WSL2/Snipaste_2023-03-12_23-05-55.png"><meta property="og:image" content="https://isaaxite.github.io/blog/resources/%E5%88%9D%E8%AF%86WSL2/Snipaste_2023-04-11_18-49-48.png"><meta property="article:published_time" content="2023-04-11T11:10:24.000Z"><meta property="article:modified_time" content="2025-03-07T23:26:45.955Z"><meta property="article:author" content="Isaac Kam"><meta property="article:tag" content="WSL"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://isaaxite.github.io/blog/resources/%E5%88%9D%E8%AF%86WSL2/enable-wsl1-windows-10.webp"><link rel="canonical" href="https://isaaxite.github.io/blog/resources/%E5%88%9D%E8%AF%86WSL2/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://isaaxite.github.io/blog/resources/%E5%88%9D%E8%AF%86WSL2/","path":"resources/初识WSL2/","title":"初识WSL2"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>初识WSL2 | Isaac Kam's Blog</title><noscript><link rel="stylesheet" href="/blog/css/noscript.css"></noscript><link rel="alternate" href="/blog/atom.xml" title="Isaac Kam's Blog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/blog/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Isaac Kam's Blog</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">I am a slow walker, but I never walk backwards.</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-sitemap"><a href="/blog/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li><li class="menu-item menu-item-rss"><a href="/blog/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-text">安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E8%A6%81%E6%B1%82"><span class="nav-text">系统要求</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%80%E6%96%B9%E4%BE%BF%E7%9A%84%E8%A6%81%E6%B1%82"><span class="nav-text">最方便的要求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%80%E4%BD%8E%E7%89%88%E6%9C%AC"><span class="nav-text">最低版本</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%AF%E7%94%A8wsl%E5%8A%9F%E8%83%BD"><span class="nav-text">启用wsl功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%AF%E7%94%A8%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B9%B3%E5%8F%B0"><span class="nav-text">启用虚拟机平台</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E8%B7%B5%E7%8E%AF%E5%A2%83"><span class="nav-text">实践环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%89%E8%A3%85"><span class="nav-text">命令行安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A7%E7%89%88%E6%9C%ACwindows%E5%AE%89%E8%A3%85WSL2"><span class="nav-text">旧版本windows安装WSL2</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9linux-distributions"><span class="nav-text">修改linux distributions</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E9%85%8D%E7%BD%AE"><span class="nav-text">添加配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E5%BC%82%E5%90%8C"><span class="nav-text">配置文件的异同</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%98%E6%94%BE%E4%BD%8D%E7%BD%AE"><span class="nav-text">存放位置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%89%B9%E6%80%A7"><span class="nav-text">特性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#systemd%E5%91%BD%E4%BB%A4%E7%9A%84%E6%94%AF%E6%8C%81"><span class="nav-text">systemd命令的支持</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Automount-settings"><span class="nav-text">Automount settings</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%99%84%E5%BD%95"><span class="nav-text">附录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E5%88%AB%E8%AF%B4%E6%98%8E"><span class="nav-text">特别说明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#wsl-%E2%80%93help"><span class="nav-text">wsl –help</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WSL%E6%94%AF%E6%8C%81%E7%9A%84Linux%E5%8F%91%E8%A1%8C%E7%89%88%E6%9C%AC"><span class="nav-text">WSL支持的Linux发行版本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Prerequisites"><span class="nav-text">Prerequisites</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E7%89%88%E6%9C%AC%EF%BC%9A"><span class="nav-text">新版本：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A7%E7%89%88%E6%9C%AC"><span class="nav-text">旧版本</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-text">参考</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-1"><span class="nav-text">安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%BB%96"><span class="nav-text">其他</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Isaac Kam" src="/blog/images/avatar.jpg"><p class="site-author-name" itemprop="name">Isaac Kam</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/blog/archives/"><span class="site-state-item-count">64</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/blog/categories/"><span class="site-state-item-count">31</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/blog/tags/"><span class="site-state-item-count">92</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/isaaxite" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;isaaxite" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="isaacgun:isaacgun@outlook.com" title="E-Mail → isaacgun:isaacgun@outlook.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a></span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://isaaxite.github.io/blog/resources/%E5%88%9D%E8%AF%86WSL2/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/blog/images/avatar.jpg"><meta itemprop="name" content="Isaac Kam"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Isaac Kam's Blog"><meta itemprop="description" content=""></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="初识WSL2 | Isaac Kam's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">初识WSL2</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2023-04-11 19:10:24" itemprop="dateCreated datePublished" datetime="2023-04-11T19:10:24+08:00">2023-04-11</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-03-08 07:26:45" itemprop="dateModified" datetime="2025-03-08T07:26:45+08:00">2025-03-08</time></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本文旨在记录WSL2的安装，让WSL基本可用。</p><p>接着是Linux发行版本的替换，以至于可以自由选择自己熟悉、喜欢的distribution。</p><p>最后，是有选择地介绍WSL的基础配置及其略详细的情况，目的是让WSL可以更加适合开发者使用。如果后面有需要会继续补充常用的配置使用。以及linux发行版本的替换。</p><span id="more"></span><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>本节将介绍安装WSL2的系统要求以及笔者的安装环境。笔者将在比较新的windows 10环境下，使用命令行安装，并且详细记录安装细节。</p><h2 id="系统要求"><a href="#系统要求" class="headerlink" title="系统要求"></a>系统要求</h2><p>安装要求是指可以安装WSL2的windows 版本。它们分为最方便的安装要求和最低的要求，前者可以直接使用命令行安装，后者需要做一些windows功能的开启，官方的详细要求可参考 <a href="#Prerequisites">附录-Prerequisites</a>。</p><h3 id="最方便的要求"><a href="#最方便的要求" class="headerlink" title="最方便的要求"></a>最方便的要求</h3><p>与下面这个本版下相同或者更高：</p><p>window 10</p><ul><li>版本：2004</li><li>OS Build：19041</li></ul><h3 id="最低版本"><a href="#最低版本" class="headerlink" title="最低版本"></a>最低版本</h3><p>最低版本的要求根据x64版本和ARM64版本有所不同。具体如下</p><p>x64版本：</p><ul><li>window 10</li><li>版本：1903</li><li>OS Build：18362</li></ul><p>ARM64版本：</p><ul><li>window 10</li><li>版本：2004</li><li>OS Build：19041</li></ul><p><strong>在符合以上要求的情况下，还需要已经安装WSL1！</strong></p><p>安装WSL1，需要以下几个操作：</p><ol><li>启用wsl功能；</li><li>启用虚拟机平台；</li></ol><h4 id="启用wsl功能"><a href="#启用wsl功能" class="headerlink" title="启用wsl功能"></a>启用wsl功能</h4><p>还需要在控制面版 &gt; windows &gt; 功能开关，勾选打开 wsl 选项，见下图：</p><p><img src="enable-wsl1-windows-10.webp"></p><p>然后，重启电脑。</p><h4 id="启用虚拟机平台"><a href="#启用虚拟机平台" class="headerlink" title="启用虚拟机平台"></a>启用虚拟机平台</h4><p>以管理员权限打开powershell执行下面命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Enable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform</span><br></pre></td></tr></table></figure><p>然后，重启电脑。</p><p>到此，旧版本的准备已经完成。</p><h2 id="实践环境"><a href="#实践环境" class="headerlink" title="实践环境"></a>实践环境</h2><p>笔者当前的环境是比较新的环境。适合使用命令行直接安装WSL2。环境细节见下图：</p><table><thead><tr><th><img src="Snipaste_2023-03-12_17-34-36.png"></th></tr></thead></table><h2 id="命令行安装"><a href="#命令行安装" class="headerlink" title="命令行安装"></a>命令行安装</h2><p>打开 powershell，使用以下命令安装，等待完成。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --install</span><br></pre></td></tr></table></figure><p>安装结束后，可以使用 <code>wsl --help</code> 查看支持的命令，详细参考 <a href="#wsl-%E2%80%93help">附录-wsl –help</a>。</p><p>然后，使用 <code>wsl --status</code> 确认当前的 WSL 版本。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\isaac&gt; wsl --status</span><br><span class="line">Default Distribution: Debian</span><br><span class="line">Default Version: 2</span><br></pre></td></tr></table></figure><p>如果不是 <code>Default Version: 2</code> 的话，使用 <code>wsl --set-default-version 2</code> 修改。</p><blockquote>–set-default-version<br>Changes the default install version for new distributions.<h2 id="旧版本windows安装WSL2"><a href="#旧版本windows安装WSL2" class="headerlink" title="旧版本windows安装WSL2"></a>旧版本windows安装WSL2</h2><p>旧版本的详情可以查看 <a href="#%E6%9C%80%E4%BD%8E%E7%89%88%E6%9C%AC">最低版本</a>。已经做好准备后，还需要做下面几步：</p><ul><li><p>下载并安装 <a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/wsl/install-manual#step-4---download-the-linux-kernel-update-package">WSL2 Linux kernel update package for x64 machines</a>；</p></li><li><p>设置WSL版本：<code>wsl --set-default-version 2</code></p></li></ul><h1 id="修改linux-distributions"><a href="#修改linux-distributions" class="headerlink" title="修改linux distributions"></a>修改linux distributions</h1><p>WSL默认安装的Linux发行版本是 Ubantu。当前WSL支持的Linux发行版本可查看 <a href="#WSL%E6%94%AF%E6%8C%81%E7%9A%84Linux%E5%8F%91%E8%A1%8C%E7%89%88%E6%9C%AC">附录-WSL支持的Linux发行版本</a>。以下以切换 Debian 作为例子：</p><p>打开 powershell，使用 <code>wsl --list -o</code> 查看当前支持的发行版本：</p><p><img src="Snipaste_2023-03-12_22-58-58.png"></p><p>见上图提示，使用 <code>wsl --install -d &lt;Distro&gt;</code> 安装。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --install -d Debian</span><br></pre></td></tr></table></figure><p>安装完成后，设置WSL默认的发行版本：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl -s Debian</span><br></pre></td></tr></table></figure><p>设置完成后，可以使用 <code>wsl --status</code> 查看。</p><p><img src="Snipaste_2023-03-12_23-05-55.png"></p><h1 id="添加配置"><a href="#添加配置" class="headerlink" title="添加配置"></a>添加配置</h1><p>下面要介绍的是使用配置文件进行配置。</p><p>WSL的配置文件有2个，分别是 <code>wsl.conf</code> 和 <code>.wslconfig</code>。接下来要介绍的是：</p><ol><li>两种配置文件的异同；</li><li>配置文件的存放位置。</li></ol><p>在配置完成之后，需要重启WSL才会生效。注意不是单纯关闭 Terminal。</p><blockquote><p>You must wait until the subsystem running your Linux distribution completely stops running and restarts for configuration setting updates to appear. This typically takes about 8 seconds after closing ALL instances of the distribution shell.</p></blockquote><h2 id="配置文件的异同"><a href="#配置文件的异同" class="headerlink" title="配置文件的异同"></a>配置文件的异同</h2><p>两个文件都是WSL的配置文件，它们区别在于存储的位置、生效的范围、配置的选项。</p><p><code>wsl.conf</code> 是WSL1时已经有的配置文件。它可以在WSL1和WSL2版本下生效。但是它可以配置的属性有效，比如要配置WSL的内存占用则只能通过<code>.wslconfig</code>文件进行配置。</p><p><code>.wslconfig</code> 是WSL2的配置文件，它仅仅在WSL2版本环境下生效。</p><blockquote><p><img src="Snipaste_2023-04-11_18-49-48.png"></p></blockquote><h2 id="存放位置"><a href="#存放位置" class="headerlink" title="存放位置"></a>存放位置</h2><p>配置文件不是自动生成的，如果是第一次配置，需要手动创建对应的配置文件。如果没有配置文件存在即使用默认配置。</p><ul><li><p><code>wsl.conf</code>：<code>/etc/wsl.conf</code></p></li><li><p><code>.wslconfig</code>: <code>C:\Users\&lt;UserName&gt;\.wslconfig</code></p></li></ul><h1 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h1><h2 id="systemd命令的支持"><a href="#systemd命令的支持" class="headerlink" title="systemd命令的支持"></a>systemd命令的支持</h2><p>默认不支持，需要在配置文件中开启</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">isaac @ ERAZER <span class="keyword">in</span> ~/workspace/blog on git:develop x [11:15:48]</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">systemd</span></span><br><span class="line">Trying to run as user instance, but the system has not been booted with systemd.</span><br></pre></td></tr></table></figure><p>配置文件中添加以下配置，重启后生效：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[boot]</span><br><span class="line">systemd=true</span><br></pre></td></tr></table></figure><p>重启后可以使用 <code>systemctl list-unit-files --type=service</code> 检查。</p><h2 id="Automount-settings"><a href="#Automount-settings" class="headerlink" title="Automount settings"></a>Automount settings</h2><p>自动挂载设置，以及options的释义，参考：<a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/wsl/wsl-config#automount-settings">https://learn.microsoft.com/en-us/windows/wsl/wsl-config#automount-settings</a></p><p>其中涉及的概念：</p><ul><li><p>uid&#x3D;1000，参考<a href="#%E9%99%84%E5%BD%95">附录</a>中的 <a target="_blank" rel="noopener" href="https://www.liquidweb.com/kb/what-is-umask-and-how-to-use-it-effectively/">What is Umask in Linux?</a></p></li><li><p>umask，参考<a href="#%E9%99%84%E5%BD%95">附录</a>中的 <a target="_blank" rel="noopener" href="https://www.liquidweb.com/kb/what-is-umask-and-how-to-use-it-effectively/">What is Umask in Linux?</a></p><p>栗子：umask&#x3D;022，则意味新建的目录与文件的权限将是<code>77 - 022 = 755</code></p></li></ul><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h2 id="特别说明"><a href="#特别说明" class="headerlink" title="特别说明"></a>特别说明</h2><p><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/wsl/wsl-config">Advanced settings configuration in WSL</a> 中包含了 <a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/wsl/wsl-config#example-wslconf-file">wsl.conf</a> 和 <a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/wsl/wsl-config#example-wslconfig-file">.wslconfig</a>的示例文件；</p><h2 id="wsl-–help"><a href="#wsl-–help" class="headerlink" title="wsl –help"></a>wsl –help</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\isaac&gt; wsl --help</span><br><span class="line">Copyright (c) Microsoft Corporation. All rights reserved.</span><br><span class="line"></span><br><span class="line">Usage: wsl.exe [Argument] [Options...] [CommandLine]</span><br><span class="line"></span><br><span class="line">Arguments for running Linux binaries:</span><br><span class="line"></span><br><span class="line">    If no command line is provided, wsl.exe launches the default shell.</span><br><span class="line"></span><br><span class="line">    --exec, -e &lt;CommandLine&gt;</span><br><span class="line">        Execute the specified command without using the default Linux shell.</span><br><span class="line"></span><br><span class="line">    --</span><br><span class="line">        Pass the remaining command line as is.</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">    --cd &lt;Directory&gt;</span><br><span class="line">        Sets the specified directory as the current working directory.</span><br><span class="line">        If ~ is used the Linux user&#x27;s home path will be used. If the path begins</span><br><span class="line">        with a / character, it will be interpreted as an absolute Linux path.</span><br><span class="line">        Otherwise, the value must be an absolute Windows path.</span><br><span class="line"></span><br><span class="line">    --distribution, -d &lt;Distro&gt;</span><br><span class="line">        Run the specified distribution.</span><br><span class="line"></span><br><span class="line">    --user, -u &lt;UserName&gt;</span><br><span class="line">        Run as the specified user.</span><br><span class="line"></span><br><span class="line">Arguments for managing Windows Subsystem for Linux:</span><br><span class="line"></span><br><span class="line">    --help</span><br><span class="line">        Display usage information.</span><br><span class="line"></span><br><span class="line">    --install [Options]</span><br><span class="line">        Install additional Windows Subsystem for Linux distributions.</span><br><span class="line">        For a list of valid distributions, use &#x27;wsl --list --online&#x27;.</span><br><span class="line"></span><br><span class="line">        Options:</span><br><span class="line">            --distribution, -d [Argument]</span><br><span class="line">                Downloads and installs a distribution by name.</span><br><span class="line"></span><br><span class="line">                Arguments:</span><br><span class="line">                    A valid distribution name (not case sensitive).</span><br><span class="line"></span><br><span class="line">                Examples:</span><br><span class="line">                    wsl --install -d Ubuntu</span><br><span class="line">                    wsl --install --distribution Debian</span><br><span class="line"></span><br><span class="line">    --set-default-version &lt;Version&gt;</span><br><span class="line">        Changes the default install version for new distributions.</span><br><span class="line"></span><br><span class="line">    --shutdown</span><br><span class="line">        Immediately terminates all running distributions and the WSL 2</span><br><span class="line">        lightweight utility virtual machine.</span><br><span class="line"></span><br><span class="line">    --status</span><br><span class="line">        Show the status of Windows Subsystem for Linux.</span><br><span class="line"></span><br><span class="line">    --update [Options]</span><br><span class="line">        If no options are specified, the WSL 2 kernel will be updated</span><br><span class="line">        to the latest version.</span><br><span class="line"></span><br><span class="line">        Options:</span><br><span class="line">            --rollback</span><br><span class="line">                Revert to the previous version of the WSL 2 kernel.</span><br><span class="line"></span><br><span class="line">            --inbox</span><br><span class="line">                Only update the inbox WSL 2 kernel. Do not install WSL from the Microsoft Store.</span><br><span class="line"></span><br><span class="line">            --web-download</span><br><span class="line">                Download the most recent version of WSL from the internet instead of the Microsoft Store.</span><br><span class="line"></span><br><span class="line">Arguments for managing distributions in Windows Subsystem for Linux:</span><br><span class="line"></span><br><span class="line">    --export &lt;Distro&gt; &lt;FileName&gt;</span><br><span class="line">        Exports the distribution to a tar file.</span><br><span class="line">        The filename can be - for standard output.</span><br><span class="line"></span><br><span class="line">    --import &lt;Distro&gt; &lt;InstallLocation&gt; &lt;FileName&gt; [Options]</span><br><span class="line">        Imports the specified tar file as a new distribution.</span><br><span class="line">        The filename can be - for standard input.</span><br><span class="line"></span><br><span class="line">        Options:</span><br><span class="line">            --version &lt;Version&gt;</span><br><span class="line">                Specifies the version to use for the new distribution.</span><br><span class="line"></span><br><span class="line">    --list, -l [Options]</span><br><span class="line">        Lists distributions.</span><br><span class="line"></span><br><span class="line">        Options:</span><br><span class="line">            --all</span><br><span class="line">                List all distributions, including distributions that are</span><br><span class="line">                currently being installed or uninstalled.</span><br><span class="line"></span><br><span class="line">            --running</span><br><span class="line">                List only distributions that are currently running.</span><br><span class="line"></span><br><span class="line">            --quiet, -q</span><br><span class="line">                Only show distribution names.</span><br><span class="line"></span><br><span class="line">            --verbose, -v</span><br><span class="line">                Show detailed information about all distributions.</span><br><span class="line"></span><br><span class="line">            --online, -o</span><br><span class="line">                Displays a list of available distributions for install with &#x27;wsl --install&#x27;.</span><br><span class="line"></span><br><span class="line">    --set-default, -s &lt;Distro&gt;</span><br><span class="line">        Sets the distribution as the default.</span><br><span class="line"></span><br><span class="line">    --set-version &lt;Distro&gt; &lt;Version&gt;</span><br><span class="line">        Changes the version of the specified distribution.</span><br><span class="line"></span><br><span class="line">    --terminate, -t &lt;Distro&gt;</span><br><span class="line">        Terminates the specified distribution.</span><br><span class="line"></span><br><span class="line">    --unregister &lt;Distro&gt;</span><br><span class="line">        Unregisters the distribution and deletes the root filesystem.</span><br></pre></td></tr></table></figure><h2 id="WSL支持的Linux发行版本"><a href="#WSL支持的Linux发行版本" class="headerlink" title="WSL支持的Linux发行版本"></a>WSL支持的Linux发行版本</h2><p>详细参考：<a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/wsl/install-manual#downloading-distributions">#downloading-distributions</a></p><p><em>PS:以下数据记录于 2023&#x2F;03&#x2F;12</em></p><blockquote><ul><li>Ubuntu</li><li>Ubuntu 22.04 LTS</li><li>Ubuntu 20.04</li><li>Ubuntu 20.04 ARM</li><li>Ubuntu 18.04</li><li>Ubuntu 18.04 ARM</li><li>Ubuntu 16.04</li><li>Debian GNU&#x2F;Linux</li><li>Kali Linux</li><li>SUSE Linux Enterprise Server 12</li><li>SUSE Linux Enterprise Server 15 SP2</li><li>SUSE Linux Enterprise Server 15 SP3</li><li>openSUSE Tumbleweed</li><li>openSUSE Leap 15.3</li><li>openSUSE Leap 15.2</li><li>Oracle Linux 8.5</li><li>Oracle Linux 7.9</li><li>Fedora Remix for WSL</li></ul></blockquote><p>另外，可以通过 powershell，使用 <code>wsl --list -o</code> 查阅当前WSL支持的Linux发行版本。</p><h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><p>以下是官方的安装要求</p><h3 id="新版本："><a href="#新版本：" class="headerlink" title="新版本："></a>新版本：</h3><p>详细参考：<a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/wsl/install#prerequisites">Install Linux on Windows with WSL - Prerequisites</a></p><blockquote><p>Prerequisites<br>You must be running Windows 10 version 2004 and higher (Build 19041 and higher) or Windows 11 to use the commands below. If you are on earlier versions please see the manual install page.</p></blockquote><h3 id="旧版本"><a href="#旧版本" class="headerlink" title="旧版本"></a>旧版本</h3><p>详细参考：<a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/wsl/install-manual#step-2---check-requirements-for-running-wsl-2">Check requirements for running WSL 2</a></p><blockquote><p>To update to WSL 2, you must be running Windows 10…</p><ul><li><p>For x64 systems: Version 1903 or later, with Build 18362 or later.</p></li><li><p>For ARM64 systems: Version 2004 or later, with Build 19041 or later.</p></li></ul></blockquote><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><ul><li><p><a target="_blank" rel="noopener" href="https://pureinfotech.com/install-windows-subsystem-linux-2-windows-10/">How to install WSL2 on Windows 10</a></p></li><li><p><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/wsl/install">Install Linux on Windows with WSL</a></p></li><li><p><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/wsl/install-manual">Manual installation steps for older versions of WSL</a></p></li></ul><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul><li><p><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/wsl/wsl-config">Advanced settings configuration in WSL</a></p></li><li><p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Systemd">Wiki about ‘Systemd’</a></p></li><li><p><a target="_blank" rel="noopener" href="https://www.linuxquestions.org/questions/linux-general-1/what-is-the-user-1000-a-4175510196/">What is the user 1000?</a></p></li><li><p><a target="_blank" rel="noopener" href="https://www.liquidweb.com/kb/what-is-umask-and-how-to-use-it-effectively/">What is Umask in Linux?</a></p></li><li><p><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/wsl/compare-versions?source=recommendations">Comparing WSL Versions</a></p></li></ul></blockquote></div><footer class="post-footer"><div class="reward-container"><div>Buy me a coffee</div><button>赞赏</button><div class="post-reward"><div><img src="/blog/images/wechatpay.jpg" alt="Isaac Kam 微信"> <span>微信</span></div><div><img src="/blog/images/alipay.jpg" alt="Isaac Kam 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"><strong>本文作者： </strong>Isaac Kam</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://isaaxite.github.io/blog/resources/%E5%88%9D%E8%AF%86WSL2/" title="初识WSL2">https://isaaxite.github.io/blog/resources/初识WSL2/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="followme"><span>欢迎关注我的其它发布渠道</span><div class="social-list"><div class="social-item"><a target="_blank" class="social-link" href="https://www.zhihu.com/people/issac-79"><span class="icon"><i class="fab | fa-zhihu"></i> </span><span class="label">Zhihu</span></a></div><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i> </span><span class="label">WeChat</span> </span><img class="social-item-img" src="/blog/images/wechat_qrcode.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/blog/atom.xml"><span class="icon"><i class="fa fa-rss"></i> </span><span class="label">RSS</span></a></div><div class="social-item"><a target="_blank" class="social-link" href="https://github.com/isaaxite"><span class="icon"><i class="fab fa-github"></i> </span><span class="label">GitHub</span></a></div><div class="social-item"><a target="_blank" class="social-link" href="isaacgun:isaacgun@outlook.com"><span class="icon"><i class="fa fa-envelope"></i> </span><span class="label">E-Mail</span></a></div></div></div><div class="post-tags"><a href="/blog/tags/WSL/" rel="tag"><i class="fa fa-tag"></i> WSL</a></div><div class="post-nav"><div class="post-nav-item"><a href="/blog/resources/hexo-deploy%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/" rel="prev" title="hexo deploy失败问题"><i class="fa fa-chevron-left"></i> hexo deploy失败问题</a></div><div class="post-nav-item"><a href="/blog/resources/license/" rel="next" title="LICENSE的选择与生成">LICENSE的选择与生成 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments utterances-container"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Isaac Kam</span></div><div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><div class="reading-progress-bar"></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script><script src="/blog/js/comments.js"></script><script src="/blog/js/utils.js"></script><script src="/blog/js/motion.js"></script><script src="/blog/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/blog/js/third-party/search/local-search.js"></script><script src="/blog/js/third-party/fancybox.js"></script><script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"isaaxite/blog","issue_term":"title","theme":"github-light"}</script><script src="/blog/js/third-party/comments/utterances.js"></script></body></html>