# 使用display属性作为路由切换的问题


![image](https://user-images.githubusercontent.com/25907273/33620767-c771d168-da23-11e7-9ef6-4052e00d369f.png)

### 前言
最近公司做一个比较简单的活动，因此用了原生的js，并用原生js实现了路由，并使用`display: none`和`display: block`切换路由页面。项目是开始是比较简单的，只有一两页，但是因为开发时间变得充裕起来，产品就新增了更多需求，页面也多也来，页面也变得丰富，但是项目框架已经做好[捂脸]。页面丰富，图片也躲起来，为了可以在移动端有更好的图片显示效果，更是使用了二倍图，图片资源就更大了，问题也慢慢暴露。

### display切换的问题
因为项目起初比较简单，因此各个路由页面都是写在一个页面(index.html)中的，目前图片多可许多，并且，`display: none`只是将元素隐藏，并不是渲染，因此，已进入index.html，整个页面的资源都在加载，各个路由组件的图片全部开始加载，顺序也是参差不齐，经常出现，当前路由页面的图片资源久久没有加载出来，这真是蛋疼了，比起单单将这个路由组件写在一个页面，用户体验更差...

### 解决方案
- 想起vue的`v-if`
没有研究过`v-if`的实现，并且如今项目deadline将近，我也没有更多时间去研究，那种只是闪过：“用js动态插入html代码”的想法，但是估计vue没有那么简单吧。

- 抽出非主页的资源
抽出所有非主页图片资源，那么进入主页就只会加载主页资源，到切换路由的页面的时候再动态预加载资源，资源加载完成在切换过去。

### 导航
- [主页](https://issaxite.github.io)
- 上一篇：[small标签的迷之竖直间隔](https://github.com/issaxite/issaxite.github.io/issues/84)
- 下一篇：[微信二次分享配置失败问题](https://github.com/issaxite/issaxite.github.io/issues/87)
