# 微信支付配置和js-sdk配置所关联公众号须一致

# js-sdk获取
在 [微信开发者文档-网页开发](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1421141115)   ，可见调起微信js-sdk的配置如下：
![](https://user-images.githubusercontent.com/25907273/32136043-344d6a3c-bbce-11e7-9704-c59edcc322fb.png)

# 调起微信支付所需要的配置如下
![](https://user-images.githubusercontent.com/25907273/32136102-20d82e96-bbcf-11e7-8f83-427a9e823b76.png)

看着两者貌似没有太大关联。

回到标题所说的问题，做微信开发（主要指网页开发）的，假如支付和调起微信js-api的配置都是来之同一个公众号，那么就不会遇到引起我标题中的所肯定的问题。由于某些限制，比如公司规模之类的，或许会出现多个公众号需要运营，但是只有一个公众号是支持支付的，然后却不仅仅一个公众号的项目需要调起支付，不明真相的前端会怎么做？不明真相的后端会怎么做？前端会使用后端返回的配置，菜鸟后端会怎么做？使用返回可以支付的配置。结果会怎么样？支付不了！

我记得好像是会抛出这样的异常：

**统一下单的appid与调起支付的appid不一致**

大概如此。

其实这句错误提示已经提示得很明显！

*统一下单*，在前端使用微信js-api的支付接口发起支付前，是需要后端先去下单的，下单完成后会返回相应的支付配置，这个配置就是后端返回给前端的。

根据抛出的异常说的`统一下单的appid与调起支付的appid不一致`,可知调起支付和使用js-sdk的公众号必须一致。

说白了，除了入口是在不可支付的公众的菜单外，其实都是调用和可支付公众号的东西。当然加入两个公众号的微信网页使用的是不同的域名，则需要在可支付公众号下配置对应的js支付目录，见图：
![](https://user-images.githubusercontent.com/25907273/32136653-24cc868e-bbd7-11e7-9f23-e99545832ec9.png)
[公众号支付开发步骤](https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_3)


备注：

1. 每个公众号只能配置一个js安全域名（只有在改域名下才能调起微信js-sdk），但是这个安全域名不需要精确到2级或者3级域名，只要写一级域名即可，比如，现在我注册一个域名：**issax.com** 并且用其为js安全域名，然后wx.issax.com、blog.issax.com等等的*.issax.com都是可以使用的






