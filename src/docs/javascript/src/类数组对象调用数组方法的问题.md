# 类数组对象调用数组方法的问题

![image](https://user-images.githubusercontent.com/25907273/33921930-29943190-e002-11e7-8996-4e96506d193b.png)


### 前言
经常在看源码的时候看到这么一句话：
```javascript
[].slice.call(arguments, 1)
```
不管理不理解这句代码实现的原理，只要知道`slice`和`arguments`这两个东西，就能大概推测出它实现的功能：返回arguments对象的下标为`1 ~ arguments.length - 1`的数组。

### 原理
只要`console.log`一下arguments就发现它并不是数组，而是一个对象，并且它并没有slice方法。slice是数组个字符串的方法。

那么要怎么调用这个arguments原型没有的方法呢？首先先来说一下slice方法，这个方法是Array原型的对象方法。它在数组中的使用如下：
```javascript
let arr = [0, 1, 2];
arr.slice(1);  // [1, 2]
```
看上面，slice除了返回数组的范围外，并没有传入目标数组，那么怎么调用到arr数组，显而易见，通过this，this指向的就是arr数组的引用，这就是核心了。

slice方法不能通过参数的形式将目标数组/类数组传入slice，而是通过this指向，那么就简单了，要让类数组对象使用slice方法，只要将slice的this指向类数组对象就好了。有想到什么吗？没错就是call或者apply，而且明显，call更加适用。

- 拆分理解
或者`[].slice.call(arguments, 1)`这样会有点难理解，那么将它拆分一下，会更好理解：
```javascript
const slice = [].slice;
slice.call(arguments, 1);
```

来个栗子
```javascript
!function() {
  let temp = slice.call(arguments, 1);
  console.log(temp);
}(1, 2, 3, 4, 5);
```
![image](https://user-images.githubusercontent.com/25907273/33921285-cf6a9af0-dffd-11e7-90c1-4beafe56504f.png)


- 或者，我们来模拟一个slice函数，
```
function slice(start, end) {
  const array = this;  
  let tempArr = [];
  end = end || array.length;

  for (let index = 0; index < array.length; index++) {
    const element = array[index];
    if(start <= index && index < end) {
      tempArr.push(element);
    }
  }
  return tempArr;
}
```
来个栗子
```javascript
!function() {
  let temp = slice.call(arguments, 1);
  console.log(temp);
}(1,2,3,4,5);
```
![image](https://user-images.githubusercontent.com/25907273/33921332-13462014-dffe-11e7-8ba7-46e0a77c247b.png)



参考：https://egoist.moe/2015/12/13/how-does-array-slice-call-arguments-work/
